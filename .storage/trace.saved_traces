{
    "version": 1,
    "minor_version": 1,
    "key": "trace.saved_traces",
    "data": {
        "automation.1648712039256": [
            {
                "extended_dict": {
                    "last_step": "action/0/choose/1/sequence/0/choose/0/sequence/0",
                    "run_id": "8882a490b1d903ebba10637264dcf550",
                    "state": "stopped",
                    "script_execution": "finished",
                    "timestamp": {
                        "start": "2022-04-02T04:35:00.004177+00:00",
                        "finish": "2022-04-02T04:35:00.010788+00:00"
                    },
                    "domain": "automation",
                    "item_id": "1648712039256",
                    "trigger": "time pattern",
                    "trace": {
                        "trigger/0": [
                            {
                                "path": "trigger/0",
                                "timestamp": "2022-04-02T04:35:00.004220+00:00",
                                "changed_variables": {
                                    "this": {
                                        "entity_id": "automation.water_heating",
                                        "state": "on",
                                        "attributes": {
                                            "last_triggered": "2022-04-02T04:34:00.004252+00:00",
                                            "mode": "single",
                                            "current": 0,
                                            "id": "1648712039256",
                                            "friendly_name": "Water Heating"
                                        },
                                        "last_changed": "2022-04-02T04:29:33.804716+00:00",
                                        "last_updated": "2022-04-02T04:34:00.011355+00:00",
                                        "context": {
                                            "id": "434292f69a57db536ff13e6794a87f4f",
                                            "parent_id": null,
                                            "user_id": null
                                        }
                                    },
                                    "trigger": {
                                        "id": "0",
                                        "idx": "0",
                                        "platform": "time_pattern",
                                        "now": "2022-04-02T12:35:00.003243+08:00",
                                        "description": "time pattern"
                                    }
                                }
                            }
                        ],
                        "action/0": [
                            {
                                "path": "action/0",
                                "timestamp": "2022-04-02T04:35:00.005494+00:00",
                                "changed_variables": {
                                    "context": {
                                        "id": "21729385b918bcf9203ffd4742570cfe",
                                        "parent_id": null,
                                        "user_id": null
                                    }
                                },
                                "result": {
                                    "choice": 1
                                }
                            }
                        ],
                        "action/0/choose/0": [
                            {
                                "path": "action/0/choose/0",
                                "timestamp": "2022-04-02T04:35:00.005534+00:00",
                                "result": {
                                    "result": false
                                }
                            }
                        ],
                        "action/0/choose/0/conditions/0": [
                            {
                                "path": "action/0/choose/0/conditions/0",
                                "timestamp": "2022-04-02T04:35:00.005552+00:00",
                                "result": {
                                    "result": false
                                }
                            }
                        ],
                        "action/0/choose/0/conditions/0/entity_id/0": [
                            {
                                "path": "action/0/choose/0/conditions/0/entity_id/0",
                                "timestamp": "2022-04-02T04:35:00.005565+00:00",
                                "result": {
                                    "result": false,
                                    "state": "off",
                                    "wanted_state": "on"
                                }
                            }
                        ],
                        "action/0/choose/1": [
                            {
                                "path": "action/0/choose/1",
                                "timestamp": "2022-04-02T04:35:00.005606+00:00",
                                "result": {
                                    "result": true
                                }
                            }
                        ],
                        "action/0/choose/1/conditions/0": [
                            {
                                "path": "action/0/choose/1/conditions/0",
                                "timestamp": "2022-04-02T04:35:00.005620+00:00",
                                "result": {
                                    "result": true
                                }
                            }
                        ],
                        "action/0/choose/1/conditions/0/entity_id/0": [
                            {
                                "path": "action/0/choose/1/conditions/0/entity_id/0",
                                "timestamp": "2022-04-02T04:35:00.005632+00:00",
                                "result": {
                                    "result": true,
                                    "state": "off",
                                    "wanted_state": "off"
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0": [
                            {
                                "path": "action/0/choose/1/sequence/0",
                                "timestamp": "2022-04-02T04:35:00.007619+00:00",
                                "result": {
                                    "choice": 0
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0/choose/0": [
                            {
                                "path": "action/0/choose/1/sequence/0/choose/0",
                                "timestamp": "2022-04-02T04:35:00.007655+00:00",
                                "result": {
                                    "result": true
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0/choose/0/conditions/0": [
                            {
                                "path": "action/0/choose/1/sequence/0/choose/0/conditions/0",
                                "timestamp": "2022-04-02T04:35:00.007670+00:00",
                                "result": {
                                    "result": true
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0/choose/0/conditions/0/entity_id/0": [
                            {
                                "path": "action/0/choose/1/sequence/0/choose/0/conditions/0/entity_id/0",
                                "timestamp": "2022-04-02T04:35:00.007684+00:00",
                                "result": {
                                    "result": true,
                                    "state": -0.8333333333333334
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0/choose/0/sequence/0": [
                            {
                                "path": "action/0/choose/1/sequence/0/choose/0/sequence/0",
                                "timestamp": "2022-04-02T04:35:00.008043+00:00",
                                "result": {
                                    "params": {
                                        "domain": "input_number",
                                        "service": "set_value",
                                        "service_data": {
                                            "value": 0,
                                            "entity_id": [
                                                "input_number.water_heating"
                                            ]
                                        },
                                        "target": {
                                            "entity_id": [
                                                "input_number.water_heating"
                                            ]
                                        }
                                    },
                                    "running_script": false,
                                    "limit": 10
                                }
                            }
                        ]
                    },
                    "config": {
                        "id": "1648712039256",
                        "alias": "Water Heating",
                        "description": "Track the heating status of the water in the heater",
                        "trigger": [
                            {
                                "platform": "time_pattern",
                                "minutes": "/1"
                            }
                        ],
                        "condition": [],
                        "action": [
                            {
                                "choose": [
                                    {
                                        "conditions": [
                                            {
                                                "condition": "state",
                                                "entity_id": "switch.water_heater",
                                                "state": "on"
                                            }
                                        ],
                                        "sequence": [
                                            {
                                                "choose": [
                                                    {
                                                        "conditions": [
                                                            {
                                                                "condition": "numeric_state",
                                                                "entity_id": "input_number.water_heating",
                                                                "above": "100",
                                                                "value_template": "{{ state.state | float + 100 / states('input_number.hot_water_preheat') | float }}"
                                                            }
                                                        ],
                                                        "sequence": [
                                                            {
                                                                "service": "input_number.set_value",
                                                                "data": {
                                                                    "value": 100
                                                                },
                                                                "target": {
                                                                    "entity_id": "input_number.water_heating"
                                                                }
                                                            }
                                                        ]
                                                    }
                                                ],
                                                "default": [
                                                    {
                                                        "service": "input_number.set_value",
                                                        "data_template": {
                                                            "entity_id": "input_number.water_heating",
                                                            "value": "{{ states('input_number.water_heating') | int + 100 / states('input_number.hot_water_preheat') | int }}"
                                                        }
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    {
                                        "conditions": [
                                            {
                                                "condition": "state",
                                                "entity_id": "switch.water_heater",
                                                "state": "off"
                                            }
                                        ],
                                        "sequence": [
                                            {
                                                "choose": [
                                                    {
                                                        "conditions": [
                                                            {
                                                                "condition": "numeric_state",
                                                                "entity_id": "input_number.water_heating",
                                                                "value_template": "{{ state.state | float - 100 / 120 }}",
                                                                "below": "0"
                                                            }
                                                        ],
                                                        "sequence": [
                                                            {
                                                                "service": "input_number.set_value",
                                                                "data": {
                                                                    "value": 0
                                                                },
                                                                "target": {
                                                                    "entity_id": "input_number.water_heating"
                                                                }
                                                            }
                                                        ]
                                                    }
                                                ],
                                                "default": [
                                                    {
                                                        "service": "input_number.set_value",
                                                        "data_template": {
                                                            "entity_id": "input_number.water_heating",
                                                            "value": "{{ states('input_number.water_heating') | float - 100 / 120 }}"
                                                        }
                                                    }
                                                ]
                                            }
                                        ]
                                    }
                                ],
                                "default": []
                            }
                        ],
                        "mode": "single"
                    },
                    "blueprint_inputs": null,
                    "context": {
                        "id": "21729385b918bcf9203ffd4742570cfe",
                        "parent_id": null,
                        "user_id": null
                    }
                },
                "short_dict": {
                    "last_step": "action/0/choose/1/sequence/0/choose/0/sequence/0",
                    "run_id": "8882a490b1d903ebba10637264dcf550",
                    "state": "stopped",
                    "script_execution": "finished",
                    "timestamp": {
                        "start": "2022-04-02T04:35:00.004177+00:00",
                        "finish": "2022-04-02T04:35:00.010788+00:00"
                    },
                    "domain": "automation",
                    "item_id": "1648712039256",
                    "trigger": "time pattern"
                }
            },
            {
                "extended_dict": {
                    "last_step": "action/0/choose/1/sequence/0/choose/0/sequence/0",
                    "run_id": "c2742d4fa4d314db606f8c2b2607d1e3",
                    "state": "stopped",
                    "script_execution": "finished",
                    "timestamp": {
                        "start": "2022-04-02T04:36:00.004441+00:00",
                        "finish": "2022-04-02T04:36:00.011053+00:00"
                    },
                    "domain": "automation",
                    "item_id": "1648712039256",
                    "trigger": "time pattern",
                    "trace": {
                        "trigger/0": [
                            {
                                "path": "trigger/0",
                                "timestamp": "2022-04-02T04:36:00.004512+00:00",
                                "changed_variables": {
                                    "this": {
                                        "entity_id": "automation.water_heating",
                                        "state": "on",
                                        "attributes": {
                                            "last_triggered": "2022-04-02T04:35:00.004293+00:00",
                                            "mode": "single",
                                            "current": 0,
                                            "id": "1648712039256",
                                            "friendly_name": "Water Heating"
                                        },
                                        "last_changed": "2022-04-02T04:29:33.804716+00:00",
                                        "last_updated": "2022-04-02T04:35:00.009950+00:00",
                                        "context": {
                                            "id": "21729385b918bcf9203ffd4742570cfe",
                                            "parent_id": null,
                                            "user_id": null
                                        }
                                    },
                                    "trigger": {
                                        "id": "0",
                                        "idx": "0",
                                        "platform": "time_pattern",
                                        "now": "2022-04-02T12:36:00.000906+08:00",
                                        "description": "time pattern"
                                    }
                                }
                            }
                        ],
                        "action/0": [
                            {
                                "path": "action/0",
                                "timestamp": "2022-04-02T04:36:00.005510+00:00",
                                "changed_variables": {
                                    "context": {
                                        "id": "2b7c00afa43bd98f43162fba83e6117d",
                                        "parent_id": null,
                                        "user_id": null
                                    }
                                },
                                "result": {
                                    "choice": 1
                                }
                            }
                        ],
                        "action/0/choose/0": [
                            {
                                "path": "action/0/choose/0",
                                "timestamp": "2022-04-02T04:36:00.005559+00:00",
                                "result": {
                                    "result": false
                                }
                            }
                        ],
                        "action/0/choose/0/conditions/0": [
                            {
                                "path": "action/0/choose/0/conditions/0",
                                "timestamp": "2022-04-02T04:36:00.005579+00:00",
                                "result": {
                                    "result": false
                                }
                            }
                        ],
                        "action/0/choose/0/conditions/0/entity_id/0": [
                            {
                                "path": "action/0/choose/0/conditions/0/entity_id/0",
                                "timestamp": "2022-04-02T04:36:00.005592+00:00",
                                "result": {
                                    "result": false,
                                    "state": "off",
                                    "wanted_state": "on"
                                }
                            }
                        ],
                        "action/0/choose/1": [
                            {
                                "path": "action/0/choose/1",
                                "timestamp": "2022-04-02T04:36:00.005637+00:00",
                                "result": {
                                    "result": true
                                }
                            }
                        ],
                        "action/0/choose/1/conditions/0": [
                            {
                                "path": "action/0/choose/1/conditions/0",
                                "timestamp": "2022-04-02T04:36:00.005652+00:00",
                                "result": {
                                    "result": true
                                }
                            }
                        ],
                        "action/0/choose/1/conditions/0/entity_id/0": [
                            {
                                "path": "action/0/choose/1/conditions/0/entity_id/0",
                                "timestamp": "2022-04-02T04:36:00.005662+00:00",
                                "result": {
                                    "result": true,
                                    "state": "off",
                                    "wanted_state": "off"
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0": [
                            {
                                "path": "action/0/choose/1/sequence/0",
                                "timestamp": "2022-04-02T04:36:00.007516+00:00",
                                "result": {
                                    "choice": 0
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0/choose/0": [
                            {
                                "path": "action/0/choose/1/sequence/0/choose/0",
                                "timestamp": "2022-04-02T04:36:00.007557+00:00",
                                "result": {
                                    "result": true
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0/choose/0/conditions/0": [
                            {
                                "path": "action/0/choose/1/sequence/0/choose/0/conditions/0",
                                "timestamp": "2022-04-02T04:36:00.007574+00:00",
                                "result": {
                                    "result": true
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0/choose/0/conditions/0/entity_id/0": [
                            {
                                "path": "action/0/choose/1/sequence/0/choose/0/conditions/0/entity_id/0",
                                "timestamp": "2022-04-02T04:36:00.007589+00:00",
                                "result": {
                                    "result": true,
                                    "state": -0.8333333333333334
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0/choose/0/sequence/0": [
                            {
                                "path": "action/0/choose/1/sequence/0/choose/0/sequence/0",
                                "timestamp": "2022-04-02T04:36:00.008080+00:00",
                                "result": {
                                    "params": {
                                        "domain": "input_number",
                                        "service": "set_value",
                                        "service_data": {
                                            "value": 0,
                                            "entity_id": [
                                                "input_number.water_heating"
                                            ]
                                        },
                                        "target": {
                                            "entity_id": [
                                                "input_number.water_heating"
                                            ]
                                        }
                                    },
                                    "running_script": false,
                                    "limit": 10
                                }
                            }
                        ]
                    },
                    "config": {
                        "id": "1648712039256",
                        "alias": "Water Heating",
                        "description": "Track the heating status of the water in the heater",
                        "trigger": [
                            {
                                "platform": "time_pattern",
                                "minutes": "/1"
                            }
                        ],
                        "condition": [],
                        "action": [
                            {
                                "choose": [
                                    {
                                        "conditions": [
                                            {
                                                "condition": "state",
                                                "entity_id": "switch.water_heater",
                                                "state": "on"
                                            }
                                        ],
                                        "sequence": [
                                            {
                                                "choose": [
                                                    {
                                                        "conditions": [
                                                            {
                                                                "condition": "numeric_state",
                                                                "entity_id": "input_number.water_heating",
                                                                "above": "100",
                                                                "value_template": "{{ state.state | float + 100 / states('input_number.hot_water_preheat') | float }}"
                                                            }
                                                        ],
                                                        "sequence": [
                                                            {
                                                                "service": "input_number.set_value",
                                                                "data": {
                                                                    "value": 100
                                                                },
                                                                "target": {
                                                                    "entity_id": "input_number.water_heating"
                                                                }
                                                            }
                                                        ]
                                                    }
                                                ],
                                                "default": [
                                                    {
                                                        "service": "input_number.set_value",
                                                        "data_template": {
                                                            "entity_id": "input_number.water_heating",
                                                            "value": "{{ states('input_number.water_heating') | int + 100 / states('input_number.hot_water_preheat') | int }}"
                                                        }
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    {
                                        "conditions": [
                                            {
                                                "condition": "state",
                                                "entity_id": "switch.water_heater",
                                                "state": "off"
                                            }
                                        ],
                                        "sequence": [
                                            {
                                                "choose": [
                                                    {
                                                        "conditions": [
                                                            {
                                                                "condition": "numeric_state",
                                                                "entity_id": "input_number.water_heating",
                                                                "value_template": "{{ state.state | float - 100 / 120 }}",
                                                                "below": "0"
                                                            }
                                                        ],
                                                        "sequence": [
                                                            {
                                                                "service": "input_number.set_value",
                                                                "data": {
                                                                    "value": 0
                                                                },
                                                                "target": {
                                                                    "entity_id": "input_number.water_heating"
                                                                }
                                                            }
                                                        ]
                                                    }
                                                ],
                                                "default": [
                                                    {
                                                        "service": "input_number.set_value",
                                                        "data_template": {
                                                            "entity_id": "input_number.water_heating",
                                                            "value": "{{ states('input_number.water_heating') | float - 100 / 120 }}"
                                                        }
                                                    }
                                                ]
                                            }
                                        ]
                                    }
                                ],
                                "default": []
                            }
                        ],
                        "mode": "single"
                    },
                    "blueprint_inputs": null,
                    "context": {
                        "id": "2b7c00afa43bd98f43162fba83e6117d",
                        "parent_id": null,
                        "user_id": null
                    }
                },
                "short_dict": {
                    "last_step": "action/0/choose/1/sequence/0/choose/0/sequence/0",
                    "run_id": "c2742d4fa4d314db606f8c2b2607d1e3",
                    "state": "stopped",
                    "script_execution": "finished",
                    "timestamp": {
                        "start": "2022-04-02T04:36:00.004441+00:00",
                        "finish": "2022-04-02T04:36:00.011053+00:00"
                    },
                    "domain": "automation",
                    "item_id": "1648712039256",
                    "trigger": "time pattern"
                }
            },
            {
                "extended_dict": {
                    "last_step": "action/0/choose/1/sequence/0/choose/0/sequence/0",
                    "run_id": "04c79c4e19f8345b8e5af847c7269afa",
                    "state": "stopped",
                    "script_execution": "finished",
                    "timestamp": {
                        "start": "2022-04-02T04:37:00.005386+00:00",
                        "finish": "2022-04-02T04:37:00.011781+00:00"
                    },
                    "domain": "automation",
                    "item_id": "1648712039256",
                    "trigger": "time pattern",
                    "trace": {
                        "trigger/0": [
                            {
                                "path": "trigger/0",
                                "timestamp": "2022-04-02T04:37:00.005438+00:00",
                                "changed_variables": {
                                    "this": {
                                        "entity_id": "automation.water_heating",
                                        "state": "on",
                                        "attributes": {
                                            "last_triggered": "2022-04-02T04:36:00.004612+00:00",
                                            "mode": "single",
                                            "current": 0,
                                            "id": "1648712039256",
                                            "friendly_name": "Water Heating"
                                        },
                                        "last_changed": "2022-04-02T04:29:33.804716+00:00",
                                        "last_updated": "2022-04-02T04:36:00.010301+00:00",
                                        "context": {
                                            "id": "2b7c00afa43bd98f43162fba83e6117d",
                                            "parent_id": null,
                                            "user_id": null
                                        }
                                    },
                                    "trigger": {
                                        "id": "0",
                                        "idx": "0",
                                        "platform": "time_pattern",
                                        "now": "2022-04-02T12:37:00.003475+08:00",
                                        "description": "time pattern"
                                    }
                                }
                            }
                        ],
                        "action/0": [
                            {
                                "path": "action/0",
                                "timestamp": "2022-04-02T04:37:00.006625+00:00",
                                "changed_variables": {
                                    "context": {
                                        "id": "dae484de0870d29a8f4d3e13b740eb14",
                                        "parent_id": null,
                                        "user_id": null
                                    }
                                },
                                "result": {
                                    "choice": 1
                                }
                            }
                        ],
                        "action/0/choose/0": [
                            {
                                "path": "action/0/choose/0",
                                "timestamp": "2022-04-02T04:37:00.006664+00:00",
                                "result": {
                                    "result": false
                                }
                            }
                        ],
                        "action/0/choose/0/conditions/0": [
                            {
                                "path": "action/0/choose/0/conditions/0",
                                "timestamp": "2022-04-02T04:37:00.006681+00:00",
                                "result": {
                                    "result": false
                                }
                            }
                        ],
                        "action/0/choose/0/conditions/0/entity_id/0": [
                            {
                                "path": "action/0/choose/0/conditions/0/entity_id/0",
                                "timestamp": "2022-04-02T04:37:00.006695+00:00",
                                "result": {
                                    "result": false,
                                    "state": "off",
                                    "wanted_state": "on"
                                }
                            }
                        ],
                        "action/0/choose/1": [
                            {
                                "path": "action/0/choose/1",
                                "timestamp": "2022-04-02T04:37:00.006735+00:00",
                                "result": {
                                    "result": true
                                }
                            }
                        ],
                        "action/0/choose/1/conditions/0": [
                            {
                                "path": "action/0/choose/1/conditions/0",
                                "timestamp": "2022-04-02T04:37:00.006749+00:00",
                                "result": {
                                    "result": true
                                }
                            }
                        ],
                        "action/0/choose/1/conditions/0/entity_id/0": [
                            {
                                "path": "action/0/choose/1/conditions/0/entity_id/0",
                                "timestamp": "2022-04-02T04:37:00.006760+00:00",
                                "result": {
                                    "result": true,
                                    "state": "off",
                                    "wanted_state": "off"
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0": [
                            {
                                "path": "action/0/choose/1/sequence/0",
                                "timestamp": "2022-04-02T04:37:00.008215+00:00",
                                "result": {
                                    "choice": 0
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0/choose/0": [
                            {
                                "path": "action/0/choose/1/sequence/0/choose/0",
                                "timestamp": "2022-04-02T04:37:00.008248+00:00",
                                "result": {
                                    "result": true
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0/choose/0/conditions/0": [
                            {
                                "path": "action/0/choose/1/sequence/0/choose/0/conditions/0",
                                "timestamp": "2022-04-02T04:37:00.008264+00:00",
                                "result": {
                                    "result": true
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0/choose/0/conditions/0/entity_id/0": [
                            {
                                "path": "action/0/choose/1/sequence/0/choose/0/conditions/0/entity_id/0",
                                "timestamp": "2022-04-02T04:37:00.008295+00:00",
                                "result": {
                                    "result": true,
                                    "state": -0.8333333333333334
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0/choose/0/sequence/0": [
                            {
                                "path": "action/0/choose/1/sequence/0/choose/0/sequence/0",
                                "timestamp": "2022-04-02T04:37:00.008707+00:00",
                                "result": {
                                    "params": {
                                        "domain": "input_number",
                                        "service": "set_value",
                                        "service_data": {
                                            "value": 0,
                                            "entity_id": [
                                                "input_number.water_heating"
                                            ]
                                        },
                                        "target": {
                                            "entity_id": [
                                                "input_number.water_heating"
                                            ]
                                        }
                                    },
                                    "running_script": false,
                                    "limit": 10
                                }
                            }
                        ]
                    },
                    "config": {
                        "id": "1648712039256",
                        "alias": "Water Heating",
                        "description": "Track the heating status of the water in the heater",
                        "trigger": [
                            {
                                "platform": "time_pattern",
                                "minutes": "/1"
                            }
                        ],
                        "condition": [],
                        "action": [
                            {
                                "choose": [
                                    {
                                        "conditions": [
                                            {
                                                "condition": "state",
                                                "entity_id": "switch.water_heater",
                                                "state": "on"
                                            }
                                        ],
                                        "sequence": [
                                            {
                                                "choose": [
                                                    {
                                                        "conditions": [
                                                            {
                                                                "condition": "numeric_state",
                                                                "entity_id": "input_number.water_heating",
                                                                "above": "100",
                                                                "value_template": "{{ state.state | float + 100 / states('input_number.hot_water_preheat') | float }}"
                                                            }
                                                        ],
                                                        "sequence": [
                                                            {
                                                                "service": "input_number.set_value",
                                                                "data": {
                                                                    "value": 100
                                                                },
                                                                "target": {
                                                                    "entity_id": "input_number.water_heating"
                                                                }
                                                            }
                                                        ]
                                                    }
                                                ],
                                                "default": [
                                                    {
                                                        "service": "input_number.set_value",
                                                        "data_template": {
                                                            "entity_id": "input_number.water_heating",
                                                            "value": "{{ states('input_number.water_heating') | int + 100 / states('input_number.hot_water_preheat') | int }}"
                                                        }
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    {
                                        "conditions": [
                                            {
                                                "condition": "state",
                                                "entity_id": "switch.water_heater",
                                                "state": "off"
                                            }
                                        ],
                                        "sequence": [
                                            {
                                                "choose": [
                                                    {
                                                        "conditions": [
                                                            {
                                                                "condition": "numeric_state",
                                                                "entity_id": "input_number.water_heating",
                                                                "value_template": "{{ state.state | float - 100 / 120 }}",
                                                                "below": "0"
                                                            }
                                                        ],
                                                        "sequence": [
                                                            {
                                                                "service": "input_number.set_value",
                                                                "data": {
                                                                    "value": 0
                                                                },
                                                                "target": {
                                                                    "entity_id": "input_number.water_heating"
                                                                }
                                                            }
                                                        ]
                                                    }
                                                ],
                                                "default": [
                                                    {
                                                        "service": "input_number.set_value",
                                                        "data_template": {
                                                            "entity_id": "input_number.water_heating",
                                                            "value": "{{ states('input_number.water_heating') | float - 100 / 120 }}"
                                                        }
                                                    }
                                                ]
                                            }
                                        ]
                                    }
                                ],
                                "default": []
                            }
                        ],
                        "mode": "single"
                    },
                    "blueprint_inputs": null,
                    "context": {
                        "id": "dae484de0870d29a8f4d3e13b740eb14",
                        "parent_id": null,
                        "user_id": null
                    }
                },
                "short_dict": {
                    "last_step": "action/0/choose/1/sequence/0/choose/0/sequence/0",
                    "run_id": "04c79c4e19f8345b8e5af847c7269afa",
                    "state": "stopped",
                    "script_execution": "finished",
                    "timestamp": {
                        "start": "2022-04-02T04:37:00.005386+00:00",
                        "finish": "2022-04-02T04:37:00.011781+00:00"
                    },
                    "domain": "automation",
                    "item_id": "1648712039256",
                    "trigger": "time pattern"
                }
            },
            {
                "extended_dict": {
                    "last_step": "action/0/choose/1/sequence/0/choose/0/sequence/0",
                    "run_id": "e38726b64b1b9c06a69e0714cb217962",
                    "state": "stopped",
                    "script_execution": "finished",
                    "timestamp": {
                        "start": "2022-04-02T04:38:00.004686+00:00",
                        "finish": "2022-04-02T04:38:00.014301+00:00"
                    },
                    "domain": "automation",
                    "item_id": "1648712039256",
                    "trigger": "time pattern",
                    "trace": {
                        "trigger/0": [
                            {
                                "path": "trigger/0",
                                "timestamp": "2022-04-02T04:38:00.004765+00:00",
                                "changed_variables": {
                                    "this": {
                                        "entity_id": "automation.water_heating",
                                        "state": "on",
                                        "attributes": {
                                            "last_triggered": "2022-04-02T04:37:00.005511+00:00",
                                            "mode": "single",
                                            "current": 0,
                                            "id": "1648712039256",
                                            "friendly_name": "Water Heating"
                                        },
                                        "last_changed": "2022-04-02T04:29:33.804716+00:00",
                                        "last_updated": "2022-04-02T04:37:00.010992+00:00",
                                        "context": {
                                            "id": "dae484de0870d29a8f4d3e13b740eb14",
                                            "parent_id": null,
                                            "user_id": null
                                        }
                                    },
                                    "trigger": {
                                        "id": "0",
                                        "idx": "0",
                                        "platform": "time_pattern",
                                        "now": "2022-04-02T12:38:00.001164+08:00",
                                        "description": "time pattern"
                                    }
                                }
                            }
                        ],
                        "action/0": [
                            {
                                "path": "action/0",
                                "timestamp": "2022-04-02T04:38:00.005887+00:00",
                                "changed_variables": {
                                    "context": {
                                        "id": "4cf2474cfe3cc6d95807ad4496fcc591",
                                        "parent_id": null,
                                        "user_id": null
                                    }
                                },
                                "result": {
                                    "choice": 1
                                }
                            }
                        ],
                        "action/0/choose/0": [
                            {
                                "path": "action/0/choose/0",
                                "timestamp": "2022-04-02T04:38:00.005935+00:00",
                                "result": {
                                    "result": false
                                }
                            }
                        ],
                        "action/0/choose/0/conditions/0": [
                            {
                                "path": "action/0/choose/0/conditions/0",
                                "timestamp": "2022-04-02T04:38:00.005961+00:00",
                                "result": {
                                    "result": false
                                }
                            }
                        ],
                        "action/0/choose/0/conditions/0/entity_id/0": [
                            {
                                "path": "action/0/choose/0/conditions/0/entity_id/0",
                                "timestamp": "2022-04-02T04:38:00.005979+00:00",
                                "result": {
                                    "result": false,
                                    "state": "off",
                                    "wanted_state": "on"
                                }
                            }
                        ],
                        "action/0/choose/1": [
                            {
                                "path": "action/0/choose/1",
                                "timestamp": "2022-04-02T04:38:00.006030+00:00",
                                "result": {
                                    "result": true
                                }
                            }
                        ],
                        "action/0/choose/1/conditions/0": [
                            {
                                "path": "action/0/choose/1/conditions/0",
                                "timestamp": "2022-04-02T04:38:00.006045+00:00",
                                "result": {
                                    "result": true
                                }
                            }
                        ],
                        "action/0/choose/1/conditions/0/entity_id/0": [
                            {
                                "path": "action/0/choose/1/conditions/0/entity_id/0",
                                "timestamp": "2022-04-02T04:38:00.006056+00:00",
                                "result": {
                                    "result": true,
                                    "state": "off",
                                    "wanted_state": "off"
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0": [
                            {
                                "path": "action/0/choose/1/sequence/0",
                                "timestamp": "2022-04-02T04:38:00.008543+00:00",
                                "result": {
                                    "choice": 0
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0/choose/0": [
                            {
                                "path": "action/0/choose/1/sequence/0/choose/0",
                                "timestamp": "2022-04-02T04:38:00.008591+00:00",
                                "result": {
                                    "result": true
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0/choose/0/conditions/0": [
                            {
                                "path": "action/0/choose/1/sequence/0/choose/0/conditions/0",
                                "timestamp": "2022-04-02T04:38:00.008610+00:00",
                                "result": {
                                    "result": true
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0/choose/0/conditions/0/entity_id/0": [
                            {
                                "path": "action/0/choose/1/sequence/0/choose/0/conditions/0/entity_id/0",
                                "timestamp": "2022-04-02T04:38:00.008626+00:00",
                                "result": {
                                    "result": true,
                                    "state": -0.8333333333333334
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0/choose/0/sequence/0": [
                            {
                                "path": "action/0/choose/1/sequence/0/choose/0/sequence/0",
                                "timestamp": "2022-04-02T04:38:00.009481+00:00",
                                "result": {
                                    "params": {
                                        "domain": "input_number",
                                        "service": "set_value",
                                        "service_data": {
                                            "value": 0,
                                            "entity_id": [
                                                "input_number.water_heating"
                                            ]
                                        },
                                        "target": {
                                            "entity_id": [
                                                "input_number.water_heating"
                                            ]
                                        }
                                    },
                                    "running_script": false,
                                    "limit": 10
                                }
                            }
                        ]
                    },
                    "config": {
                        "id": "1648712039256",
                        "alias": "Water Heating",
                        "description": "Track the heating status of the water in the heater",
                        "trigger": [
                            {
                                "platform": "time_pattern",
                                "minutes": "/1"
                            }
                        ],
                        "condition": [],
                        "action": [
                            {
                                "choose": [
                                    {
                                        "conditions": [
                                            {
                                                "condition": "state",
                                                "entity_id": "switch.water_heater",
                                                "state": "on"
                                            }
                                        ],
                                        "sequence": [
                                            {
                                                "choose": [
                                                    {
                                                        "conditions": [
                                                            {
                                                                "condition": "numeric_state",
                                                                "entity_id": "input_number.water_heating",
                                                                "above": "100",
                                                                "value_template": "{{ state.state | float + 100 / states('input_number.hot_water_preheat') | float }}"
                                                            }
                                                        ],
                                                        "sequence": [
                                                            {
                                                                "service": "input_number.set_value",
                                                                "data": {
                                                                    "value": 100
                                                                },
                                                                "target": {
                                                                    "entity_id": "input_number.water_heating"
                                                                }
                                                            }
                                                        ]
                                                    }
                                                ],
                                                "default": [
                                                    {
                                                        "service": "input_number.set_value",
                                                        "data_template": {
                                                            "entity_id": "input_number.water_heating",
                                                            "value": "{{ states('input_number.water_heating') | int + 100 / states('input_number.hot_water_preheat') | int }}"
                                                        }
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    {
                                        "conditions": [
                                            {
                                                "condition": "state",
                                                "entity_id": "switch.water_heater",
                                                "state": "off"
                                            }
                                        ],
                                        "sequence": [
                                            {
                                                "choose": [
                                                    {
                                                        "conditions": [
                                                            {
                                                                "condition": "numeric_state",
                                                                "entity_id": "input_number.water_heating",
                                                                "value_template": "{{ state.state | float - 100 / 120 }}",
                                                                "below": "0"
                                                            }
                                                        ],
                                                        "sequence": [
                                                            {
                                                                "service": "input_number.set_value",
                                                                "data": {
                                                                    "value": 0
                                                                },
                                                                "target": {
                                                                    "entity_id": "input_number.water_heating"
                                                                }
                                                            }
                                                        ]
                                                    }
                                                ],
                                                "default": [
                                                    {
                                                        "service": "input_number.set_value",
                                                        "data_template": {
                                                            "entity_id": "input_number.water_heating",
                                                            "value": "{{ states('input_number.water_heating') | float - 100 / 120 }}"
                                                        }
                                                    }
                                                ]
                                            }
                                        ]
                                    }
                                ],
                                "default": []
                            }
                        ],
                        "mode": "single"
                    },
                    "blueprint_inputs": null,
                    "context": {
                        "id": "4cf2474cfe3cc6d95807ad4496fcc591",
                        "parent_id": null,
                        "user_id": null
                    }
                },
                "short_dict": {
                    "last_step": "action/0/choose/1/sequence/0/choose/0/sequence/0",
                    "run_id": "e38726b64b1b9c06a69e0714cb217962",
                    "state": "stopped",
                    "script_execution": "finished",
                    "timestamp": {
                        "start": "2022-04-02T04:38:00.004686+00:00",
                        "finish": "2022-04-02T04:38:00.014301+00:00"
                    },
                    "domain": "automation",
                    "item_id": "1648712039256",
                    "trigger": "time pattern"
                }
            },
            {
                "extended_dict": {
                    "last_step": "action/0/choose/1/sequence/0/choose/0/sequence/0",
                    "run_id": "04596a0efe0e56fbbc84681f49883d73",
                    "state": "stopped",
                    "script_execution": "finished",
                    "timestamp": {
                        "start": "2022-04-02T04:39:00.003853+00:00",
                        "finish": "2022-04-02T04:39:00.011480+00:00"
                    },
                    "domain": "automation",
                    "item_id": "1648712039256",
                    "trigger": "time pattern",
                    "trace": {
                        "trigger/0": [
                            {
                                "path": "trigger/0",
                                "timestamp": "2022-04-02T04:39:00.003908+00:00",
                                "changed_variables": {
                                    "this": {
                                        "entity_id": "automation.water_heating",
                                        "state": "on",
                                        "attributes": {
                                            "last_triggered": "2022-04-02T04:38:00.004871+00:00",
                                            "mode": "single",
                                            "current": 0,
                                            "id": "1648712039256",
                                            "friendly_name": "Water Heating"
                                        },
                                        "last_changed": "2022-04-02T04:29:33.804716+00:00",
                                        "last_updated": "2022-04-02T04:38:00.013187+00:00",
                                        "context": {
                                            "id": "4cf2474cfe3cc6d95807ad4496fcc591",
                                            "parent_id": null,
                                            "user_id": null
                                        }
                                    },
                                    "trigger": {
                                        "id": "0",
                                        "idx": "0",
                                        "platform": "time_pattern",
                                        "now": "2022-04-02T12:39:00.002958+08:00",
                                        "description": "time pattern"
                                    }
                                }
                            }
                        ],
                        "action/0": [
                            {
                                "path": "action/0",
                                "timestamp": "2022-04-02T04:39:00.006041+00:00",
                                "changed_variables": {
                                    "context": {
                                        "id": "03dbbb2f27488c42c9e0663d68d7f5c8",
                                        "parent_id": null,
                                        "user_id": null
                                    }
                                },
                                "result": {
                                    "choice": 1
                                }
                            }
                        ],
                        "action/0/choose/0": [
                            {
                                "path": "action/0/choose/0",
                                "timestamp": "2022-04-02T04:39:00.006080+00:00",
                                "result": {
                                    "result": false
                                }
                            }
                        ],
                        "action/0/choose/0/conditions/0": [
                            {
                                "path": "action/0/choose/0/conditions/0",
                                "timestamp": "2022-04-02T04:39:00.006099+00:00",
                                "result": {
                                    "result": false
                                }
                            }
                        ],
                        "action/0/choose/0/conditions/0/entity_id/0": [
                            {
                                "path": "action/0/choose/0/conditions/0/entity_id/0",
                                "timestamp": "2022-04-02T04:39:00.006118+00:00",
                                "result": {
                                    "result": false,
                                    "state": "off",
                                    "wanted_state": "on"
                                }
                            }
                        ],
                        "action/0/choose/1": [
                            {
                                "path": "action/0/choose/1",
                                "timestamp": "2022-04-02T04:39:00.006175+00:00",
                                "result": {
                                    "result": true
                                }
                            }
                        ],
                        "action/0/choose/1/conditions/0": [
                            {
                                "path": "action/0/choose/1/conditions/0",
                                "timestamp": "2022-04-02T04:39:00.006191+00:00",
                                "result": {
                                    "result": true
                                }
                            }
                        ],
                        "action/0/choose/1/conditions/0/entity_id/0": [
                            {
                                "path": "action/0/choose/1/conditions/0/entity_id/0",
                                "timestamp": "2022-04-02T04:39:00.006212+00:00",
                                "result": {
                                    "result": true,
                                    "state": "off",
                                    "wanted_state": "off"
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0": [
                            {
                                "path": "action/0/choose/1/sequence/0",
                                "timestamp": "2022-04-02T04:39:00.008032+00:00",
                                "result": {
                                    "choice": 0
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0/choose/0": [
                            {
                                "path": "action/0/choose/1/sequence/0/choose/0",
                                "timestamp": "2022-04-02T04:39:00.008064+00:00",
                                "result": {
                                    "result": true
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0/choose/0/conditions/0": [
                            {
                                "path": "action/0/choose/1/sequence/0/choose/0/conditions/0",
                                "timestamp": "2022-04-02T04:39:00.008080+00:00",
                                "result": {
                                    "result": true
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0/choose/0/conditions/0/entity_id/0": [
                            {
                                "path": "action/0/choose/1/sequence/0/choose/0/conditions/0/entity_id/0",
                                "timestamp": "2022-04-02T04:39:00.008093+00:00",
                                "result": {
                                    "result": true,
                                    "state": -0.8333333333333334
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0/choose/0/sequence/0": [
                            {
                                "path": "action/0/choose/1/sequence/0/choose/0/sequence/0",
                                "timestamp": "2022-04-02T04:39:00.008462+00:00",
                                "result": {
                                    "params": {
                                        "domain": "input_number",
                                        "service": "set_value",
                                        "service_data": {
                                            "value": 0,
                                            "entity_id": [
                                                "input_number.water_heating"
                                            ]
                                        },
                                        "target": {
                                            "entity_id": [
                                                "input_number.water_heating"
                                            ]
                                        }
                                    },
                                    "running_script": false,
                                    "limit": 10
                                }
                            }
                        ]
                    },
                    "config": {
                        "id": "1648712039256",
                        "alias": "Water Heating",
                        "description": "Track the heating status of the water in the heater",
                        "trigger": [
                            {
                                "platform": "time_pattern",
                                "minutes": "/1"
                            }
                        ],
                        "condition": [],
                        "action": [
                            {
                                "choose": [
                                    {
                                        "conditions": [
                                            {
                                                "condition": "state",
                                                "entity_id": "switch.water_heater",
                                                "state": "on"
                                            }
                                        ],
                                        "sequence": [
                                            {
                                                "choose": [
                                                    {
                                                        "conditions": [
                                                            {
                                                                "condition": "numeric_state",
                                                                "entity_id": "input_number.water_heating",
                                                                "above": "100",
                                                                "value_template": "{{ state.state | float + 100 / states('input_number.hot_water_preheat') | float }}"
                                                            }
                                                        ],
                                                        "sequence": [
                                                            {
                                                                "service": "input_number.set_value",
                                                                "data": {
                                                                    "value": 100
                                                                },
                                                                "target": {
                                                                    "entity_id": "input_number.water_heating"
                                                                }
                                                            }
                                                        ]
                                                    }
                                                ],
                                                "default": [
                                                    {
                                                        "service": "input_number.set_value",
                                                        "data_template": {
                                                            "entity_id": "input_number.water_heating",
                                                            "value": "{{ states('input_number.water_heating') | int + 100 / states('input_number.hot_water_preheat') | int }}"
                                                        }
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    {
                                        "conditions": [
                                            {
                                                "condition": "state",
                                                "entity_id": "switch.water_heater",
                                                "state": "off"
                                            }
                                        ],
                                        "sequence": [
                                            {
                                                "choose": [
                                                    {
                                                        "conditions": [
                                                            {
                                                                "condition": "numeric_state",
                                                                "entity_id": "input_number.water_heating",
                                                                "value_template": "{{ state.state | float - 100 / 120 }}",
                                                                "below": "0"
                                                            }
                                                        ],
                                                        "sequence": [
                                                            {
                                                                "service": "input_number.set_value",
                                                                "data": {
                                                                    "value": 0
                                                                },
                                                                "target": {
                                                                    "entity_id": "input_number.water_heating"
                                                                }
                                                            }
                                                        ]
                                                    }
                                                ],
                                                "default": [
                                                    {
                                                        "service": "input_number.set_value",
                                                        "data_template": {
                                                            "entity_id": "input_number.water_heating",
                                                            "value": "{{ states('input_number.water_heating') | float - 100 / 120 }}"
                                                        }
                                                    }
                                                ]
                                            }
                                        ]
                                    }
                                ],
                                "default": []
                            }
                        ],
                        "mode": "single"
                    },
                    "blueprint_inputs": null,
                    "context": {
                        "id": "03dbbb2f27488c42c9e0663d68d7f5c8",
                        "parent_id": null,
                        "user_id": null
                    }
                },
                "short_dict": {
                    "last_step": "action/0/choose/1/sequence/0/choose/0/sequence/0",
                    "run_id": "04596a0efe0e56fbbc84681f49883d73",
                    "state": "stopped",
                    "script_execution": "finished",
                    "timestamp": {
                        "start": "2022-04-02T04:39:00.003853+00:00",
                        "finish": "2022-04-02T04:39:00.011480+00:00"
                    },
                    "domain": "automation",
                    "item_id": "1648712039256",
                    "trigger": "time pattern"
                }
            }
        ],
        "automation.1648783441110": [
            {
                "extended_dict": {
                    "last_step": "action/0/choose/1/sequence/0/conditions/0/entity_id/0",
                    "run_id": "551d25dd6af0283ca24c136b0eeefc05",
                    "state": "stopped",
                    "script_execution": "finished",
                    "timestamp": {
                        "start": "2022-04-02T04:35:00.003804+00:00",
                        "finish": "2022-04-02T04:35:00.009550+00:00"
                    },
                    "domain": "automation",
                    "item_id": "1648783441110",
                    "trigger": "time pattern",
                    "trace": {
                        "trigger/0": [
                            {
                                "path": "trigger/0",
                                "timestamp": "2022-04-02T04:35:00.003866+00:00",
                                "changed_variables": {
                                    "this": {
                                        "entity_id": "automation.dishwasher_cooldown_timer",
                                        "state": "on",
                                        "attributes": {
                                            "last_triggered": "2022-04-02T04:34:00.005193+00:00",
                                            "mode": "single",
                                            "current": 0,
                                            "id": "1648783441110",
                                            "friendly_name": "Dishwasher Cooldown Timer"
                                        },
                                        "last_changed": "2022-04-02T04:29:33.804809+00:00",
                                        "last_updated": "2022-04-02T04:34:00.009376+00:00",
                                        "context": {
                                            "id": "b7aa1a74caf3e4df0b9c9c162b9da1af",
                                            "parent_id": null,
                                            "user_id": null
                                        }
                                    },
                                    "trigger": {
                                        "id": "decrement",
                                        "idx": "0",
                                        "platform": "time_pattern",
                                        "now": "2022-04-02T12:35:00.000963+08:00",
                                        "description": "time pattern"
                                    }
                                }
                            }
                        ],
                        "action/0": [
                            {
                                "path": "action/0",
                                "timestamp": "2022-04-02T04:35:00.004913+00:00",
                                "changed_variables": {
                                    "context": {
                                        "id": "9758ddf32057a0927592b447ccd908db",
                                        "parent_id": null,
                                        "user_id": null
                                    }
                                },
                                "result": {
                                    "choice": 1
                                }
                            }
                        ],
                        "action/0/choose/0": [
                            {
                                "path": "action/0/choose/0",
                                "timestamp": "2022-04-02T04:35:00.004971+00:00",
                                "result": {
                                    "result": false
                                }
                            }
                        ],
                        "action/0/choose/0/conditions/0": [
                            {
                                "path": "action/0/choose/0/conditions/0",
                                "timestamp": "2022-04-02T04:35:00.004994+00:00",
                                "result": {
                                    "result": false
                                }
                            }
                        ],
                        "action/0/choose/1": [
                            {
                                "path": "action/0/choose/1",
                                "timestamp": "2022-04-02T04:35:00.005040+00:00",
                                "result": {
                                    "result": true
                                }
                            }
                        ],
                        "action/0/choose/1/conditions/0": [
                            {
                                "path": "action/0/choose/1/conditions/0",
                                "timestamp": "2022-04-02T04:35:00.005054+00:00",
                                "result": {
                                    "result": true
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0": [
                            {
                                "path": "action/0/choose/1/sequence/0",
                                "timestamp": "2022-04-02T04:35:00.007028+00:00",
                                "error": "",
                                "result": {
                                    "result": false
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0/conditions/0": [
                            {
                                "path": "action/0/choose/1/sequence/0/conditions/0",
                                "timestamp": "2022-04-02T04:35:00.007496+00:00",
                                "result": {
                                    "result": false
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0/conditions/0/entity_id/0": [
                            {
                                "path": "action/0/choose/1/sequence/0/conditions/0/entity_id/0",
                                "timestamp": "2022-04-02T04:35:00.007518+00:00",
                                "result": {
                                    "result": false,
                                    "state": 0.0,
                                    "wanted_state_above": 0.0
                                }
                            }
                        ]
                    },
                    "config": {
                        "id": "1648783441110",
                        "alias": "Dishwasher Cooldown Timer",
                        "description": "Keep track of the time since dishwasher finished washing to cool down the load",
                        "trigger": [
                            {
                                "platform": "time_pattern",
                                "id": "decrement",
                                "minutes": "/1"
                            },
                            {
                                "platform": "state",
                                "entity_id": "sensor.dishwasher",
                                "attribute": "dishwasher_status",
                                "to": "washing",
                                "id": "wash_start"
                            }
                        ],
                        "condition": [],
                        "action": [
                            {
                                "choose": [
                                    {
                                        "conditions": [
                                            {
                                                "condition": "trigger",
                                                "id": "wash_start"
                                            }
                                        ],
                                        "sequence": [
                                            {
                                                "service": "input_number.set_value",
                                                "data": {
                                                    "value": 30
                                                },
                                                "target": {
                                                    "entity_id": "input_number.dishwasher_cooldown_time"
                                                }
                                            }
                                        ]
                                    },
                                    {
                                        "conditions": [
                                            {
                                                "condition": "trigger",
                                                "id": "decrement"
                                            }
                                        ],
                                        "sequence": [
                                            {
                                                "condition": "and",
                                                "conditions": [
                                                    {
                                                        "condition": "numeric_state",
                                                        "entity_id": "input_number.dishwasher_cooldown_time",
                                                        "above": "0"
                                                    },
                                                    {
                                                        "condition": "not",
                                                        "conditions": [
                                                            {
                                                                "condition": "state",
                                                                "entity_id": "sensor.dishwasher",
                                                                "attribute": "dishwasher_status",
                                                                "state": "washing"
                                                            }
                                                        ]
                                                    }
                                                ]
                                            },
                                            {
                                                "service": "input_number.decrement",
                                                "data": {},
                                                "target": {
                                                    "entity_id": "input_number.dishwasher_cooldown_time"
                                                }
                                            }
                                        ]
                                    }
                                ],
                                "default": []
                            }
                        ],
                        "mode": "single"
                    },
                    "blueprint_inputs": null,
                    "context": {
                        "id": "9758ddf32057a0927592b447ccd908db",
                        "parent_id": null,
                        "user_id": null
                    }
                },
                "short_dict": {
                    "last_step": "action/0/choose/1/sequence/0/conditions/0/entity_id/0",
                    "run_id": "551d25dd6af0283ca24c136b0eeefc05",
                    "state": "stopped",
                    "script_execution": "finished",
                    "timestamp": {
                        "start": "2022-04-02T04:35:00.003804+00:00",
                        "finish": "2022-04-02T04:35:00.009550+00:00"
                    },
                    "domain": "automation",
                    "item_id": "1648783441110",
                    "trigger": "time pattern"
                }
            },
            {
                "extended_dict": {
                    "last_step": "action/0/choose/1/sequence/0/conditions/0/entity_id/0",
                    "run_id": "ebc0fa435019c46583625cb955c38209",
                    "state": "stopped",
                    "script_execution": "finished",
                    "timestamp": {
                        "start": "2022-04-02T04:36:00.004798+00:00",
                        "finish": "2022-04-02T04:36:00.009924+00:00"
                    },
                    "domain": "automation",
                    "item_id": "1648783441110",
                    "trigger": "time pattern",
                    "trace": {
                        "trigger/0": [
                            {
                                "path": "trigger/0",
                                "timestamp": "2022-04-02T04:36:00.004846+00:00",
                                "changed_variables": {
                                    "this": {
                                        "entity_id": "automation.dishwasher_cooldown_timer",
                                        "state": "on",
                                        "attributes": {
                                            "last_triggered": "2022-04-02T04:35:00.003993+00:00",
                                            "mode": "single",
                                            "current": 0,
                                            "id": "1648783441110",
                                            "friendly_name": "Dishwasher Cooldown Timer"
                                        },
                                        "last_changed": "2022-04-02T04:29:33.804809+00:00",
                                        "last_updated": "2022-04-02T04:35:00.008452+00:00",
                                        "context": {
                                            "id": "9758ddf32057a0927592b447ccd908db",
                                            "parent_id": null,
                                            "user_id": null
                                        }
                                    },
                                    "trigger": {
                                        "id": "decrement",
                                        "idx": "0",
                                        "platform": "time_pattern",
                                        "now": "2022-04-02T12:36:00.003197+08:00",
                                        "description": "time pattern"
                                    }
                                }
                            }
                        ],
                        "action/0": [
                            {
                                "path": "action/0",
                                "timestamp": "2022-04-02T04:36:00.006080+00:00",
                                "changed_variables": {
                                    "context": {
                                        "id": "701f3390c6aadef3112384d7f64ee7e5",
                                        "parent_id": null,
                                        "user_id": null
                                    }
                                },
                                "result": {
                                    "choice": 1
                                }
                            }
                        ],
                        "action/0/choose/0": [
                            {
                                "path": "action/0/choose/0",
                                "timestamp": "2022-04-02T04:36:00.006123+00:00",
                                "result": {
                                    "result": false
                                }
                            }
                        ],
                        "action/0/choose/0/conditions/0": [
                            {
                                "path": "action/0/choose/0/conditions/0",
                                "timestamp": "2022-04-02T04:36:00.006141+00:00",
                                "result": {
                                    "result": false
                                }
                            }
                        ],
                        "action/0/choose/1": [
                            {
                                "path": "action/0/choose/1",
                                "timestamp": "2022-04-02T04:36:00.006173+00:00",
                                "result": {
                                    "result": true
                                }
                            }
                        ],
                        "action/0/choose/1/conditions/0": [
                            {
                                "path": "action/0/choose/1/conditions/0",
                                "timestamp": "2022-04-02T04:36:00.006186+00:00",
                                "result": {
                                    "result": true
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0": [
                            {
                                "path": "action/0/choose/1/sequence/0",
                                "timestamp": "2022-04-02T04:36:00.007788+00:00",
                                "error": "",
                                "result": {
                                    "result": false
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0/conditions/0": [
                            {
                                "path": "action/0/choose/1/sequence/0/conditions/0",
                                "timestamp": "2022-04-02T04:36:00.007852+00:00",
                                "result": {
                                    "result": false
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0/conditions/0/entity_id/0": [
                            {
                                "path": "action/0/choose/1/sequence/0/conditions/0/entity_id/0",
                                "timestamp": "2022-04-02T04:36:00.007868+00:00",
                                "result": {
                                    "result": false,
                                    "state": 0.0,
                                    "wanted_state_above": 0.0
                                }
                            }
                        ]
                    },
                    "config": {
                        "id": "1648783441110",
                        "alias": "Dishwasher Cooldown Timer",
                        "description": "Keep track of the time since dishwasher finished washing to cool down the load",
                        "trigger": [
                            {
                                "platform": "time_pattern",
                                "id": "decrement",
                                "minutes": "/1"
                            },
                            {
                                "platform": "state",
                                "entity_id": "sensor.dishwasher",
                                "attribute": "dishwasher_status",
                                "to": "washing",
                                "id": "wash_start"
                            }
                        ],
                        "condition": [],
                        "action": [
                            {
                                "choose": [
                                    {
                                        "conditions": [
                                            {
                                                "condition": "trigger",
                                                "id": "wash_start"
                                            }
                                        ],
                                        "sequence": [
                                            {
                                                "service": "input_number.set_value",
                                                "data": {
                                                    "value": 30
                                                },
                                                "target": {
                                                    "entity_id": "input_number.dishwasher_cooldown_time"
                                                }
                                            }
                                        ]
                                    },
                                    {
                                        "conditions": [
                                            {
                                                "condition": "trigger",
                                                "id": "decrement"
                                            }
                                        ],
                                        "sequence": [
                                            {
                                                "condition": "and",
                                                "conditions": [
                                                    {
                                                        "condition": "numeric_state",
                                                        "entity_id": "input_number.dishwasher_cooldown_time",
                                                        "above": "0"
                                                    },
                                                    {
                                                        "condition": "not",
                                                        "conditions": [
                                                            {
                                                                "condition": "state",
                                                                "entity_id": "sensor.dishwasher",
                                                                "attribute": "dishwasher_status",
                                                                "state": "washing"
                                                            }
                                                        ]
                                                    }
                                                ]
                                            },
                                            {
                                                "service": "input_number.decrement",
                                                "data": {},
                                                "target": {
                                                    "entity_id": "input_number.dishwasher_cooldown_time"
                                                }
                                            }
                                        ]
                                    }
                                ],
                                "default": []
                            }
                        ],
                        "mode": "single"
                    },
                    "blueprint_inputs": null,
                    "context": {
                        "id": "701f3390c6aadef3112384d7f64ee7e5",
                        "parent_id": null,
                        "user_id": null
                    }
                },
                "short_dict": {
                    "last_step": "action/0/choose/1/sequence/0/conditions/0/entity_id/0",
                    "run_id": "ebc0fa435019c46583625cb955c38209",
                    "state": "stopped",
                    "script_execution": "finished",
                    "timestamp": {
                        "start": "2022-04-02T04:36:00.004798+00:00",
                        "finish": "2022-04-02T04:36:00.009924+00:00"
                    },
                    "domain": "automation",
                    "item_id": "1648783441110",
                    "trigger": "time pattern"
                }
            },
            {
                "extended_dict": {
                    "last_step": "action/0/choose/1/sequence/0/conditions/0/entity_id/0",
                    "run_id": "b30d3723d5b3520fc3483f094ce24296",
                    "state": "stopped",
                    "script_execution": "finished",
                    "timestamp": {
                        "start": "2022-04-02T04:37:00.005018+00:00",
                        "finish": "2022-04-02T04:37:00.010573+00:00"
                    },
                    "domain": "automation",
                    "item_id": "1648783441110",
                    "trigger": "time pattern",
                    "trace": {
                        "trigger/0": [
                            {
                                "path": "trigger/0",
                                "timestamp": "2022-04-02T04:37:00.005072+00:00",
                                "changed_variables": {
                                    "this": {
                                        "entity_id": "automation.dishwasher_cooldown_timer",
                                        "state": "on",
                                        "attributes": {
                                            "last_triggered": "2022-04-02T04:36:00.004917+00:00",
                                            "mode": "single",
                                            "current": 0,
                                            "id": "1648783441110",
                                            "friendly_name": "Dishwasher Cooldown Timer"
                                        },
                                        "last_changed": "2022-04-02T04:29:33.804809+00:00",
                                        "last_updated": "2022-04-02T04:36:00.008637+00:00",
                                        "context": {
                                            "id": "701f3390c6aadef3112384d7f64ee7e5",
                                            "parent_id": null,
                                            "user_id": null
                                        }
                                    },
                                    "trigger": {
                                        "id": "decrement",
                                        "idx": "0",
                                        "platform": "time_pattern",
                                        "now": "2022-04-02T12:37:00.001507+08:00",
                                        "description": "time pattern"
                                    }
                                }
                            }
                        ],
                        "action/0": [
                            {
                                "path": "action/0",
                                "timestamp": "2022-04-02T04:37:00.006079+00:00",
                                "changed_variables": {
                                    "context": {
                                        "id": "a5fba72da21fa20127855e9daca6d274",
                                        "parent_id": null,
                                        "user_id": null
                                    }
                                },
                                "result": {
                                    "choice": 1
                                }
                            }
                        ],
                        "action/0/choose/0": [
                            {
                                "path": "action/0/choose/0",
                                "timestamp": "2022-04-02T04:37:00.006127+00:00",
                                "result": {
                                    "result": false
                                }
                            }
                        ],
                        "action/0/choose/0/conditions/0": [
                            {
                                "path": "action/0/choose/0/conditions/0",
                                "timestamp": "2022-04-02T04:37:00.006147+00:00",
                                "result": {
                                    "result": false
                                }
                            }
                        ],
                        "action/0/choose/1": [
                            {
                                "path": "action/0/choose/1",
                                "timestamp": "2022-04-02T04:37:00.006183+00:00",
                                "result": {
                                    "result": true
                                }
                            }
                        ],
                        "action/0/choose/1/conditions/0": [
                            {
                                "path": "action/0/choose/1/conditions/0",
                                "timestamp": "2022-04-02T04:37:00.006197+00:00",
                                "result": {
                                    "result": true
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0": [
                            {
                                "path": "action/0/choose/1/sequence/0",
                                "timestamp": "2022-04-02T04:37:00.008050+00:00",
                                "error": "",
                                "result": {
                                    "result": false
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0/conditions/0": [
                            {
                                "path": "action/0/choose/1/sequence/0/conditions/0",
                                "timestamp": "2022-04-02T04:37:00.008111+00:00",
                                "result": {
                                    "result": false
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0/conditions/0/entity_id/0": [
                            {
                                "path": "action/0/choose/1/sequence/0/conditions/0/entity_id/0",
                                "timestamp": "2022-04-02T04:37:00.008127+00:00",
                                "result": {
                                    "result": false,
                                    "state": 0.0,
                                    "wanted_state_above": 0.0
                                }
                            }
                        ]
                    },
                    "config": {
                        "id": "1648783441110",
                        "alias": "Dishwasher Cooldown Timer",
                        "description": "Keep track of the time since dishwasher finished washing to cool down the load",
                        "trigger": [
                            {
                                "platform": "time_pattern",
                                "id": "decrement",
                                "minutes": "/1"
                            },
                            {
                                "platform": "state",
                                "entity_id": "sensor.dishwasher",
                                "attribute": "dishwasher_status",
                                "to": "washing",
                                "id": "wash_start"
                            }
                        ],
                        "condition": [],
                        "action": [
                            {
                                "choose": [
                                    {
                                        "conditions": [
                                            {
                                                "condition": "trigger",
                                                "id": "wash_start"
                                            }
                                        ],
                                        "sequence": [
                                            {
                                                "service": "input_number.set_value",
                                                "data": {
                                                    "value": 30
                                                },
                                                "target": {
                                                    "entity_id": "input_number.dishwasher_cooldown_time"
                                                }
                                            }
                                        ]
                                    },
                                    {
                                        "conditions": [
                                            {
                                                "condition": "trigger",
                                                "id": "decrement"
                                            }
                                        ],
                                        "sequence": [
                                            {
                                                "condition": "and",
                                                "conditions": [
                                                    {
                                                        "condition": "numeric_state",
                                                        "entity_id": "input_number.dishwasher_cooldown_time",
                                                        "above": "0"
                                                    },
                                                    {
                                                        "condition": "not",
                                                        "conditions": [
                                                            {
                                                                "condition": "state",
                                                                "entity_id": "sensor.dishwasher",
                                                                "attribute": "dishwasher_status",
                                                                "state": "washing"
                                                            }
                                                        ]
                                                    }
                                                ]
                                            },
                                            {
                                                "service": "input_number.decrement",
                                                "data": {},
                                                "target": {
                                                    "entity_id": "input_number.dishwasher_cooldown_time"
                                                }
                                            }
                                        ]
                                    }
                                ],
                                "default": []
                            }
                        ],
                        "mode": "single"
                    },
                    "blueprint_inputs": null,
                    "context": {
                        "id": "a5fba72da21fa20127855e9daca6d274",
                        "parent_id": null,
                        "user_id": null
                    }
                },
                "short_dict": {
                    "last_step": "action/0/choose/1/sequence/0/conditions/0/entity_id/0",
                    "run_id": "b30d3723d5b3520fc3483f094ce24296",
                    "state": "stopped",
                    "script_execution": "finished",
                    "timestamp": {
                        "start": "2022-04-02T04:37:00.005018+00:00",
                        "finish": "2022-04-02T04:37:00.010573+00:00"
                    },
                    "domain": "automation",
                    "item_id": "1648783441110",
                    "trigger": "time pattern"
                }
            },
            {
                "extended_dict": {
                    "last_step": "action/0/choose/1/sequence/0/conditions/0/entity_id/0",
                    "run_id": "224a89e45db80c532131a4b364fc5f6d",
                    "state": "stopped",
                    "script_execution": "finished",
                    "timestamp": {
                        "start": "2022-04-02T04:38:00.005080+00:00",
                        "finish": "2022-04-02T04:38:00.012395+00:00"
                    },
                    "domain": "automation",
                    "item_id": "1648783441110",
                    "trigger": "time pattern",
                    "trace": {
                        "trigger/0": [
                            {
                                "path": "trigger/0",
                                "timestamp": "2022-04-02T04:38:00.005119+00:00",
                                "changed_variables": {
                                    "this": {
                                        "entity_id": "automation.dishwasher_cooldown_timer",
                                        "state": "on",
                                        "attributes": {
                                            "last_triggered": "2022-04-02T04:37:00.005171+00:00",
                                            "mode": "single",
                                            "current": 0,
                                            "id": "1648783441110",
                                            "friendly_name": "Dishwasher Cooldown Timer"
                                        },
                                        "last_changed": "2022-04-02T04:29:33.804809+00:00",
                                        "last_updated": "2022-04-02T04:37:00.009106+00:00",
                                        "context": {
                                            "id": "a5fba72da21fa20127855e9daca6d274",
                                            "parent_id": null,
                                            "user_id": null
                                        }
                                    },
                                    "trigger": {
                                        "id": "decrement",
                                        "idx": "0",
                                        "platform": "time_pattern",
                                        "now": "2022-04-02T12:38:00.003469+08:00",
                                        "description": "time pattern"
                                    }
                                }
                            }
                        ],
                        "action/0": [
                            {
                                "path": "action/0",
                                "timestamp": "2022-04-02T04:38:00.006560+00:00",
                                "changed_variables": {
                                    "context": {
                                        "id": "ae1c04981e0e5c9e45cc3395fdde69ad",
                                        "parent_id": null,
                                        "user_id": null
                                    }
                                },
                                "result": {
                                    "choice": 1
                                }
                            }
                        ],
                        "action/0/choose/0": [
                            {
                                "path": "action/0/choose/0",
                                "timestamp": "2022-04-02T04:38:00.006599+00:00",
                                "result": {
                                    "result": false
                                }
                            }
                        ],
                        "action/0/choose/0/conditions/0": [
                            {
                                "path": "action/0/choose/0/conditions/0",
                                "timestamp": "2022-04-02T04:38:00.006616+00:00",
                                "result": {
                                    "result": false
                                }
                            }
                        ],
                        "action/0/choose/1": [
                            {
                                "path": "action/0/choose/1",
                                "timestamp": "2022-04-02T04:38:00.006648+00:00",
                                "result": {
                                    "result": true
                                }
                            }
                        ],
                        "action/0/choose/1/conditions/0": [
                            {
                                "path": "action/0/choose/1/conditions/0",
                                "timestamp": "2022-04-02T04:38:00.006661+00:00",
                                "result": {
                                    "result": true
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0": [
                            {
                                "path": "action/0/choose/1/sequence/0",
                                "timestamp": "2022-04-02T04:38:00.008844+00:00",
                                "error": "",
                                "result": {
                                    "result": false
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0/conditions/0": [
                            {
                                "path": "action/0/choose/1/sequence/0/conditions/0",
                                "timestamp": "2022-04-02T04:38:00.008907+00:00",
                                "result": {
                                    "result": false
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0/conditions/0/entity_id/0": [
                            {
                                "path": "action/0/choose/1/sequence/0/conditions/0/entity_id/0",
                                "timestamp": "2022-04-02T04:38:00.008924+00:00",
                                "result": {
                                    "result": false,
                                    "state": 0.0,
                                    "wanted_state_above": 0.0
                                }
                            }
                        ]
                    },
                    "config": {
                        "id": "1648783441110",
                        "alias": "Dishwasher Cooldown Timer",
                        "description": "Keep track of the time since dishwasher finished washing to cool down the load",
                        "trigger": [
                            {
                                "platform": "time_pattern",
                                "id": "decrement",
                                "minutes": "/1"
                            },
                            {
                                "platform": "state",
                                "entity_id": "sensor.dishwasher",
                                "attribute": "dishwasher_status",
                                "to": "washing",
                                "id": "wash_start"
                            }
                        ],
                        "condition": [],
                        "action": [
                            {
                                "choose": [
                                    {
                                        "conditions": [
                                            {
                                                "condition": "trigger",
                                                "id": "wash_start"
                                            }
                                        ],
                                        "sequence": [
                                            {
                                                "service": "input_number.set_value",
                                                "data": {
                                                    "value": 30
                                                },
                                                "target": {
                                                    "entity_id": "input_number.dishwasher_cooldown_time"
                                                }
                                            }
                                        ]
                                    },
                                    {
                                        "conditions": [
                                            {
                                                "condition": "trigger",
                                                "id": "decrement"
                                            }
                                        ],
                                        "sequence": [
                                            {
                                                "condition": "and",
                                                "conditions": [
                                                    {
                                                        "condition": "numeric_state",
                                                        "entity_id": "input_number.dishwasher_cooldown_time",
                                                        "above": "0"
                                                    },
                                                    {
                                                        "condition": "not",
                                                        "conditions": [
                                                            {
                                                                "condition": "state",
                                                                "entity_id": "sensor.dishwasher",
                                                                "attribute": "dishwasher_status",
                                                                "state": "washing"
                                                            }
                                                        ]
                                                    }
                                                ]
                                            },
                                            {
                                                "service": "input_number.decrement",
                                                "data": {},
                                                "target": {
                                                    "entity_id": "input_number.dishwasher_cooldown_time"
                                                }
                                            }
                                        ]
                                    }
                                ],
                                "default": []
                            }
                        ],
                        "mode": "single"
                    },
                    "blueprint_inputs": null,
                    "context": {
                        "id": "ae1c04981e0e5c9e45cc3395fdde69ad",
                        "parent_id": null,
                        "user_id": null
                    }
                },
                "short_dict": {
                    "last_step": "action/0/choose/1/sequence/0/conditions/0/entity_id/0",
                    "run_id": "224a89e45db80c532131a4b364fc5f6d",
                    "state": "stopped",
                    "script_execution": "finished",
                    "timestamp": {
                        "start": "2022-04-02T04:38:00.005080+00:00",
                        "finish": "2022-04-02T04:38:00.012395+00:00"
                    },
                    "domain": "automation",
                    "item_id": "1648783441110",
                    "trigger": "time pattern"
                }
            },
            {
                "extended_dict": {
                    "last_step": "action/0/choose/1/sequence/0/conditions/0/entity_id/0",
                    "run_id": "ae2cafc9b5849257ecaca81eca8c39aa",
                    "state": "stopped",
                    "script_execution": "finished",
                    "timestamp": {
                        "start": "2022-04-02T04:39:00.003510+00:00",
                        "finish": "2022-04-02T04:39:00.010116+00:00"
                    },
                    "domain": "automation",
                    "item_id": "1648783441110",
                    "trigger": "time pattern",
                    "trace": {
                        "trigger/0": [
                            {
                                "path": "trigger/0",
                                "timestamp": "2022-04-02T04:39:00.003566+00:00",
                                "changed_variables": {
                                    "this": {
                                        "entity_id": "automation.dishwasher_cooldown_timer",
                                        "state": "on",
                                        "attributes": {
                                            "last_triggered": "2022-04-02T04:38:00.005205+00:00",
                                            "mode": "single",
                                            "current": 0,
                                            "id": "1648783441110",
                                            "friendly_name": "Dishwasher Cooldown Timer"
                                        },
                                        "last_changed": "2022-04-02T04:29:33.804809+00:00",
                                        "last_updated": "2022-04-02T04:38:00.010908+00:00",
                                        "context": {
                                            "id": "ae1c04981e0e5c9e45cc3395fdde69ad",
                                            "parent_id": null,
                                            "user_id": null
                                        }
                                    },
                                    "trigger": {
                                        "id": "decrement",
                                        "idx": "0",
                                        "platform": "time_pattern",
                                        "now": "2022-04-02T12:39:00.000623+08:00",
                                        "description": "time pattern"
                                    }
                                }
                            }
                        ],
                        "action/0": [
                            {
                                "path": "action/0",
                                "timestamp": "2022-04-02T04:39:00.005502+00:00",
                                "changed_variables": {
                                    "context": {
                                        "id": "78834918bbb19024fbd8370b0c98330e",
                                        "parent_id": null,
                                        "user_id": null
                                    }
                                },
                                "result": {
                                    "choice": 1
                                }
                            }
                        ],
                        "action/0/choose/0": [
                            {
                                "path": "action/0/choose/0",
                                "timestamp": "2022-04-02T04:39:00.005565+00:00",
                                "result": {
                                    "result": false
                                }
                            }
                        ],
                        "action/0/choose/0/conditions/0": [
                            {
                                "path": "action/0/choose/0/conditions/0",
                                "timestamp": "2022-04-02T04:39:00.005587+00:00",
                                "result": {
                                    "result": false
                                }
                            }
                        ],
                        "action/0/choose/1": [
                            {
                                "path": "action/0/choose/1",
                                "timestamp": "2022-04-02T04:39:00.005624+00:00",
                                "result": {
                                    "result": true
                                }
                            }
                        ],
                        "action/0/choose/1/conditions/0": [
                            {
                                "path": "action/0/choose/1/conditions/0",
                                "timestamp": "2022-04-02T04:39:00.005637+00:00",
                                "result": {
                                    "result": true
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0": [
                            {
                                "path": "action/0/choose/1/sequence/0",
                                "timestamp": "2022-04-02T04:39:00.007867+00:00",
                                "error": "",
                                "result": {
                                    "result": false
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0/conditions/0": [
                            {
                                "path": "action/0/choose/1/sequence/0/conditions/0",
                                "timestamp": "2022-04-02T04:39:00.007927+00:00",
                                "result": {
                                    "result": false
                                }
                            }
                        ],
                        "action/0/choose/1/sequence/0/conditions/0/entity_id/0": [
                            {
                                "path": "action/0/choose/1/sequence/0/conditions/0/entity_id/0",
                                "timestamp": "2022-04-02T04:39:00.007943+00:00",
                                "result": {
                                    "result": false,
                                    "state": 0.0,
                                    "wanted_state_above": 0.0
                                }
                            }
                        ]
                    },
                    "config": {
                        "id": "1648783441110",
                        "alias": "Dishwasher Cooldown Timer",
                        "description": "Keep track of the time since dishwasher finished washing to cool down the load",
                        "trigger": [
                            {
                                "platform": "time_pattern",
                                "id": "decrement",
                                "minutes": "/1"
                            },
                            {
                                "platform": "state",
                                "entity_id": "sensor.dishwasher",
                                "attribute": "dishwasher_status",
                                "to": "washing",
                                "id": "wash_start"
                            }
                        ],
                        "condition": [],
                        "action": [
                            {
                                "choose": [
                                    {
                                        "conditions": [
                                            {
                                                "condition": "trigger",
                                                "id": "wash_start"
                                            }
                                        ],
                                        "sequence": [
                                            {
                                                "service": "input_number.set_value",
                                                "data": {
                                                    "value": 30
                                                },
                                                "target": {
                                                    "entity_id": "input_number.dishwasher_cooldown_time"
                                                }
                                            }
                                        ]
                                    },
                                    {
                                        "conditions": [
                                            {
                                                "condition": "trigger",
                                                "id": "decrement"
                                            }
                                        ],
                                        "sequence": [
                                            {
                                                "condition": "and",
                                                "conditions": [
                                                    {
                                                        "condition": "numeric_state",
                                                        "entity_id": "input_number.dishwasher_cooldown_time",
                                                        "above": "0"
                                                    },
                                                    {
                                                        "condition": "not",
                                                        "conditions": [
                                                            {
                                                                "condition": "state",
                                                                "entity_id": "sensor.dishwasher",
                                                                "attribute": "dishwasher_status",
                                                                "state": "washing"
                                                            }
                                                        ]
                                                    }
                                                ]
                                            },
                                            {
                                                "service": "input_number.decrement",
                                                "data": {},
                                                "target": {
                                                    "entity_id": "input_number.dishwasher_cooldown_time"
                                                }
                                            }
                                        ]
                                    }
                                ],
                                "default": []
                            }
                        ],
                        "mode": "single"
                    },
                    "blueprint_inputs": null,
                    "context": {
                        "id": "78834918bbb19024fbd8370b0c98330e",
                        "parent_id": null,
                        "user_id": null
                    }
                },
                "short_dict": {
                    "last_step": "action/0/choose/1/sequence/0/conditions/0/entity_id/0",
                    "run_id": "ae2cafc9b5849257ecaca81eca8c39aa",
                    "state": "stopped",
                    "script_execution": "finished",
                    "timestamp": {
                        "start": "2022-04-02T04:39:00.003510+00:00",
                        "finish": "2022-04-02T04:39:00.010116+00:00"
                    },
                    "domain": "automation",
                    "item_id": "1648783441110",
                    "trigger": "time pattern"
                }
            }
        ],
        "automation.1643644178195": [
            {
                "extended_dict": {
                    "last_step": "action/3/choose/5/conditions/0",
                    "run_id": "611c6ad0ef18282b2bca49938afe66a3",
                    "state": "stopped",
                    "script_execution": "finished",
                    "timestamp": {
                        "start": "2022-04-02T04:34:52.511088+00:00",
                        "finish": "2022-04-02T04:34:52.523175+00:00"
                    },
                    "domain": "automation",
                    "item_id": "1643644178195",
                    "trigger": "event 'zha_event'",
                    "trace": {
                        "trigger/1": [
                            {
                                "path": "trigger/1",
                                "timestamp": "2022-04-02T04:34:52.512269+00:00",
                                "changed_variables": {
                                    "this": {
                                        "entity_id": "automation.powder_room_lights_controller",
                                        "state": "on",
                                        "attributes": {
                                            "last_triggered": "2022-04-02T03:38:11.163719+00:00",
                                            "mode": "restart",
                                            "current": 0,
                                            "id": "1643644178195",
                                            "friendly_name": "Powder Room Lights Controller"
                                        },
                                        "last_changed": "2022-04-02T04:29:33.802646+00:00",
                                        "last_updated": "2022-04-02T04:29:33.802646+00:00",
                                        "context": {
                                            "id": "3e15bab908a762ceac109329292d85ac",
                                            "parent_id": null,
                                            "user_id": null
                                        }
                                    },
                                    "trigger": {
                                        "id": "1",
                                        "idx": "1",
                                        "platform": "event",
                                        "event": {
                                            "event_type": "zha_event",
                                            "data": {
                                                "device_ieee": "84:fd:27:ff:fe:37:50:2c",
                                                "unique_id": "84:fd:27:ff:fe:37:50:2c:1:0x0020",
                                                "device_id": "8fd4f8715be89cc0f383c887c3fac892",
                                                "endpoint_id": 1,
                                                "cluster_id": 32,
                                                "command": "checkin",
                                                "args": []
                                            },
                                            "origin": "LOCAL",
                                            "time_fired": "2022-04-02T04:34:52.510156+00:00",
                                            "context": {
                                                "id": "b598e770d7af7524da981fd483e0e9a9",
                                                "parent_id": null,
                                                "user_id": null
                                            }
                                        },
                                        "description": "event 'zha_event'"
                                    },
                                    "integration": "ZHA",
                                    "button_up_long_loop": true,
                                    "button_up_long_max_loop_repeats": 50,
                                    "button_up_double_press": false,
                                    "button_down_long_loop": true,
                                    "button_down_long_max_loop_repeats": 50,
                                    "button_down_double_press": false,
                                    "helper_last_controller_event": "input_text.zz_powder_room_lights_controller_last_event",
                                    "helper_double_press_delay": 500,
                                    "helper_debounce_delay": 0,
                                    "integration_id": "zha",
                                    "adjusted_double_press_delay": 500,
                                    "actions_mapping": {
                                        "deconz": {
                                            "button_up_short": [
                                                "1002"
                                            ],
                                            "button_up_long": [
                                                "1001"
                                            ],
                                            "button_up_release": [
                                                "1003"
                                            ],
                                            "button_down_short": [
                                                "2002"
                                            ],
                                            "button_down_long": [
                                                "2001"
                                            ],
                                            "button_down_release": [
                                                "2003"
                                            ]
                                        },
                                        "zha": {
                                            "button_up_short": [
                                                "on"
                                            ],
                                            "button_up_long": [
                                                "move_with_on_off_0_83"
                                            ],
                                            "button_up_release": [
                                                "stop"
                                            ],
                                            "button_down_short": [
                                                "off"
                                            ],
                                            "button_down_long": [
                                                "move_1_83"
                                            ],
                                            "button_down_release": [
                                                "stop"
                                            ]
                                        },
                                        "zigbee2mqtt": {
                                            "button_up_short": [
                                                "on"
                                            ],
                                            "button_up_long": [
                                                "brightness_move_up"
                                            ],
                                            "button_up_release": [
                                                "brightness_stop"
                                            ],
                                            "button_down_short": [
                                                "off"
                                            ],
                                            "button_down_long": [
                                                "brightness_move_down"
                                            ],
                                            "button_down_release": [
                                                "brightness_stop"
                                            ]
                                        }
                                    },
                                    "button_up_short": [
                                        "on"
                                    ],
                                    "button_up_long": [
                                        "move_with_on_off_0_83"
                                    ],
                                    "button_up_release": [
                                        "stop"
                                    ],
                                    "button_down_short": [
                                        "off"
                                    ],
                                    "button_down_long": [
                                        "move_1_83"
                                    ],
                                    "button_down_release": [
                                        "stop"
                                    ],
                                    "integrations_with_prev_event_storage": [
                                        "zha",
                                        "zigbee2mqtt"
                                    ],
                                    "controller_entity": "",
                                    "controller_device": "8fd4f8715be89cc0f383c887c3fac892",
                                    "controller_id": "8fd4f8715be89cc0f383c887c3fac892"
                                }
                            }
                        ],
                        "condition/0": [
                            {
                                "path": "condition/0",
                                "timestamp": "2022-04-02T04:34:52.512332+00:00",
                                "result": {
                                    "result": true
                                }
                            }
                        ],
                        "condition/0/conditions/0": [
                            {
                                "path": "condition/0/conditions/0",
                                "timestamp": "2022-04-02T04:34:52.512364+00:00",
                                "result": {
                                    "result": true,
                                    "entities": []
                                }
                            }
                        ],
                        "condition/0/conditions/1": [
                            {
                                "path": "condition/0/conditions/1",
                                "timestamp": "2022-04-02T04:34:52.513373+00:00",
                                "result": {
                                    "result": true,
                                    "entities": []
                                }
                            }
                        ],
                        "action/0": [
                            {
                                "path": "action/0",
                                "timestamp": "2022-04-02T04:34:52.514428+00:00",
                                "changed_variables": {
                                    "context": {
                                        "id": "c952080fbdf9df3145d33df7bf3c2847",
                                        "parent_id": "b598e770d7af7524da981fd483e0e9a9",
                                        "user_id": null
                                    }
                                },
                                "result": {
                                    "delay": 0.0,
                                    "done": true
                                }
                            }
                        ],
                        "action/1": [
                            {
                                "path": "action/1",
                                "timestamp": "2022-04-02T04:34:52.516690+00:00"
                            }
                        ],
                        "action/2": [
                            {
                                "path": "action/2",
                                "timestamp": "2022-04-02T04:34:52.517753+00:00",
                                "changed_variables": {
                                    "trigger_action": "checkin",
                                    "trigger_delta": 3401349.4670391083,
                                    "last_controller_event": "checkin"
                                },
                                "result": {
                                    "params": {
                                        "domain": "input_text",
                                        "service": "set_value",
                                        "service_data": {
                                            "entity_id": "input_text.zz_powder_room_lights_controller_last_event",
                                            "value": {
                                                "trigger_action": "checkin",
                                                "last_triggered": "2022-04-02 12:34:52.517903+08:00"
                                            }
                                        },
                                        "target": {}
                                    },
                                    "running_script": false,
                                    "limit": 10
                                }
                            }
                        ],
                        "action/3": [
                            {
                                "path": "action/3",
                                "timestamp": "2022-04-02T04:34:52.520084+00:00"
                            }
                        ],
                        "action/3/choose/0": [
                            {
                                "path": "action/3/choose/0",
                                "timestamp": "2022-04-02T04:34:52.520971+00:00",
                                "result": {
                                    "result": false
                                }
                            }
                        ],
                        "action/3/choose/0/conditions/0": [
                            {
                                "path": "action/3/choose/0/conditions/0",
                                "timestamp": "2022-04-02T04:34:52.521007+00:00",
                                "result": {
                                    "result": false,
                                    "entities": []
                                }
                            }
                        ],
                        "action/3/choose/1": [
                            {
                                "path": "action/3/choose/1",
                                "timestamp": "2022-04-02T04:34:52.521158+00:00",
                                "result": {
                                    "result": false
                                }
                            }
                        ],
                        "action/3/choose/1/conditions/0": [
                            {
                                "path": "action/3/choose/1/conditions/0",
                                "timestamp": "2022-04-02T04:34:52.521180+00:00",
                                "result": {
                                    "result": false,
                                    "entities": []
                                }
                            }
                        ],
                        "action/3/choose/2": [
                            {
                                "path": "action/3/choose/2",
                                "timestamp": "2022-04-02T04:34:52.521275+00:00",
                                "result": {
                                    "result": false
                                }
                            }
                        ],
                        "action/3/choose/2/conditions/0": [
                            {
                                "path": "action/3/choose/2/conditions/0",
                                "timestamp": "2022-04-02T04:34:52.521294+00:00",
                                "result": {
                                    "result": false,
                                    "entities": []
                                }
                            }
                        ],
                        "action/3/choose/3": [
                            {
                                "path": "action/3/choose/3",
                                "timestamp": "2022-04-02T04:34:52.521419+00:00",
                                "result": {
                                    "result": false
                                }
                            }
                        ],
                        "action/3/choose/3/conditions/0": [
                            {
                                "path": "action/3/choose/3/conditions/0",
                                "timestamp": "2022-04-02T04:34:52.521439+00:00",
                                "result": {
                                    "result": false,
                                    "entities": []
                                }
                            }
                        ],
                        "action/3/choose/4": [
                            {
                                "path": "action/3/choose/4",
                                "timestamp": "2022-04-02T04:34:52.521526+00:00",
                                "result": {
                                    "result": false
                                }
                            }
                        ],
                        "action/3/choose/4/conditions/0": [
                            {
                                "path": "action/3/choose/4/conditions/0",
                                "timestamp": "2022-04-02T04:34:52.521544+00:00",
                                "result": {
                                    "result": false,
                                    "entities": []
                                }
                            }
                        ],
                        "action/3/choose/5": [
                            {
                                "path": "action/3/choose/5",
                                "timestamp": "2022-04-02T04:34:52.521642+00:00",
                                "result": {
                                    "result": false
                                }
                            }
                        ],
                        "action/3/choose/5/conditions/0": [
                            {
                                "path": "action/3/choose/5/conditions/0",
                                "timestamp": "2022-04-02T04:34:52.521661+00:00",
                                "result": {
                                    "result": false,
                                    "entities": []
                                }
                            }
                        ]
                    },
                    "config": {
                        "variables": {
                            "integration": "ZHA",
                            "button_up_long_loop": true,
                            "button_up_long_max_loop_repeats": 50,
                            "button_up_double_press": false,
                            "button_down_long_loop": true,
                            "button_down_long_max_loop_repeats": 50,
                            "button_down_double_press": false,
                            "helper_last_controller_event": "input_text.zz_powder_room_lights_controller_last_event",
                            "helper_double_press_delay": 500,
                            "helper_debounce_delay": 0,
                            "integration_id": "{{ integration | lower }}",
                            "adjusted_double_press_delay": "{{ [helper_double_press_delay - helper_debounce_delay, 100] | max }}",
                            "actions_mapping": {
                                "deconz": {
                                    "button_up_short": [
                                        "1002"
                                    ],
                                    "button_up_long": [
                                        "1001"
                                    ],
                                    "button_up_release": [
                                        "1003"
                                    ],
                                    "button_down_short": [
                                        "2002"
                                    ],
                                    "button_down_long": [
                                        "2001"
                                    ],
                                    "button_down_release": [
                                        "2003"
                                    ]
                                },
                                "zha": {
                                    "button_up_short": [
                                        "on"
                                    ],
                                    "button_up_long": [
                                        "move_with_on_off_0_83"
                                    ],
                                    "button_up_release": [
                                        "stop"
                                    ],
                                    "button_down_short": [
                                        "off"
                                    ],
                                    "button_down_long": [
                                        "move_1_83"
                                    ],
                                    "button_down_release": [
                                        "stop"
                                    ]
                                },
                                "zigbee2mqtt": {
                                    "button_up_short": [
                                        "on"
                                    ],
                                    "button_up_long": [
                                        "brightness_move_up"
                                    ],
                                    "button_up_release": [
                                        "brightness_stop"
                                    ],
                                    "button_down_short": [
                                        "off"
                                    ],
                                    "button_down_long": [
                                        "brightness_move_down"
                                    ],
                                    "button_down_release": [
                                        "brightness_stop"
                                    ]
                                }
                            },
                            "button_up_short": "{{ actions_mapping[integration_id][\"button_up_short\"] }}",
                            "button_up_long": "{{ actions_mapping[integration_id][\"button_up_long\"] }}",
                            "button_up_release": "{{ actions_mapping[integration_id][\"button_up_release\"] }}",
                            "button_down_short": "{{ actions_mapping[integration_id][\"button_down_short\"] }}",
                            "button_down_long": "{{ actions_mapping[integration_id][\"button_down_long\"] }}",
                            "button_down_release": "{{ actions_mapping[integration_id][\"button_down_release\"] }}",
                            "integrations_with_prev_event_storage": [
                                "zha",
                                "zigbee2mqtt"
                            ],
                            "controller_entity": "",
                            "controller_device": "8fd4f8715be89cc0f383c887c3fac892",
                            "controller_id": "{% if integration_id==\"zigbee2mqtt\" %}{{controller_entity}}{% else %}{{controller_device}}{% endif %}"
                        },
                        "mode": "restart",
                        "max_exceeded": "silent",
                        "trigger": [
                            {
                                "platform": "event",
                                "event_type": "state_changed",
                                "event_data": {
                                    "entity_id": ""
                                }
                            },
                            {
                                "platform": "event",
                                "event_type": [
                                    "deconz_event",
                                    "zha_event"
                                ],
                                "event_data": {
                                    "device_id": "8fd4f8715be89cc0f383c887c3fac892"
                                }
                            }
                        ],
                        "condition": [
                            {
                                "condition": "and",
                                "conditions": [
                                    "{%- set trigger_action -%} {%- if integration_id == \"zigbee2mqtt\" -%} {{ trigger.event.data.new_state.state }} {%- elif integration_id == \"deconz\" -%} {{ trigger.event.data.event }} {%- elif integration_id == \"zha\" -%} {{ trigger.event.data.command }}{{\"_\" if trigger.event.data.args|length > 0}}{{ trigger.event.data.args|join(\"_\") }} {%- endif -%} {%- endset -%} {{ trigger_action not in [\"\",\"None\"] }}",
                                    "{{ integration_id != \"zigbee2mqtt\" or trigger.event.data.new_state.state != trigger.event.data.old_state.state }}"
                                ]
                            }
                        ],
                        "action": [
                            {
                                "delay": {
                                    "milliseconds": 0
                                }
                            },
                            {
                                "variables": {
                                    "trigger_action": "{%- if integration_id == \"zigbee2mqtt\" -%} {{ trigger.event.data.new_state.state }} {%- elif integration_id == \"deconz\" -%} {{ trigger.event.data.event }} {%- elif integration_id == \"zha\" -%} {{ trigger.event.data.command }}{{\"_\" if trigger.event.data.args|length > 0}}{{ trigger.event.data.args|join(\"_\") }} {%- endif -%}",
                                    "trigger_delta": "{{ (as_timestamp(now()) - as_timestamp((states(helper_last_controller_event) | from_json).last_triggered if helper_last_controller_event is not none and (states(helper_last_controller_event) | regex_match(\"^\\{(\\\".*\\\": \\\".*\\\"(, )?)*\\}$\")) else \"1970-01-01 00:00:00\")) * 1000 }}",
                                    "last_controller_event": "{{ (states(helper_last_controller_event) | from_json).trigger_action if helper_last_controller_event is not none and (states(helper_last_controller_event) | regex_match(\"^\\{(\\\".*\\\": \\\".*\\\"(, )?)*\\}$\")) else \"\" }}"
                                }
                            },
                            {
                                "service": "input_text.set_value",
                                "data": {
                                    "entity_id": "input_text.zz_powder_room_lights_controller_last_event",
                                    "value": "{{ {\"trigger_action\":trigger_action,\"last_triggered\":now()|string} | to_json }}"
                                }
                            },
                            {
                                "choose": [
                                    {
                                        "conditions": "{{ trigger_action | string in button_up_short }}",
                                        "sequence": [
                                            {
                                                "choose": [
                                                    {
                                                        "conditions": "{{ button_up_double_press }}",
                                                        "sequence": [
                                                            {
                                                                "choose": [
                                                                    {
                                                                        "conditions": "{{ trigger_action | string in states(helper_last_controller_event) and trigger_delta | int <= helper_double_press_delay | int }}",
                                                                        "sequence": [
                                                                            {
                                                                                "service": "input_text.set_value",
                                                                                "data": {
                                                                                    "entity_id": "input_text.zz_powder_room_lights_controller_last_event",
                                                                                    "value": "{{ {\"trigger_action\":\"double_press\",\"last_triggered\":now() | string} | to_json }}"
                                                                                }
                                                                            },
                                                                            {
                                                                                "event": "ahb_controller_event",
                                                                                "event_data": {
                                                                                    "controller": "{{ controller_id }}",
                                                                                    "action": "button_up_double"
                                                                                }
                                                                            },
                                                                            {
                                                                                "choose": [
                                                                                    {
                                                                                        "conditions": [],
                                                                                        "sequence": []
                                                                                    }
                                                                                ]
                                                                            }
                                                                        ]
                                                                    }
                                                                ],
                                                                "default": [
                                                                    {
                                                                        "delay": {
                                                                            "milliseconds": "{{ adjusted_double_press_delay }}"
                                                                        }
                                                                    },
                                                                    {
                                                                        "event": "ahb_controller_event",
                                                                        "event_data": {
                                                                            "controller": "{{ controller_id }}",
                                                                            "action": "button_up_short"
                                                                        }
                                                                    },
                                                                    {
                                                                        "choose": [
                                                                            {
                                                                                "conditions": [],
                                                                                "sequence": [
                                                                                    {
                                                                                        "choose": [
                                                                                            {
                                                                                                "conditions": [
                                                                                                    {
                                                                                                        "condition": "time",
                                                                                                        "after": "input_datetime.wind_down",
                                                                                                        "before": "input_datetime.lights_auto_control_end"
                                                                                                    }
                                                                                                ],
                                                                                                "sequence": [
                                                                                                    {
                                                                                                        "service": "light.turn_on",
                                                                                                        "target": {
                                                                                                            "entity_id": "light.powder_room_pendant_light_entity"
                                                                                                        },
                                                                                                        "data": {
                                                                                                            "brightness_pct": 5
                                                                                                        }
                                                                                                    }
                                                                                                ]
                                                                                            }
                                                                                        ],
                                                                                        "default": [
                                                                                            {
                                                                                                "service": "light.turn_on",
                                                                                                "target": {
                                                                                                    "entity_id": "light.powder_room_pendant_light_entity"
                                                                                                },
                                                                                                "data": {
                                                                                                    "brightness_pct": 100
                                                                                                }
                                                                                            }
                                                                                        ]
                                                                                    }
                                                                                ]
                                                                            }
                                                                        ]
                                                                    }
                                                                ]
                                                            }
                                                        ]
                                                    }
                                                ],
                                                "default": [
                                                    {
                                                        "event": "ahb_controller_event",
                                                        "event_data": {
                                                            "controller": "{{ controller_id }}",
                                                            "action": "button_up_short"
                                                        }
                                                    },
                                                    {
                                                        "choose": [
                                                            {
                                                                "conditions": [],
                                                                "sequence": [
                                                                    {
                                                                        "choose": [
                                                                            {
                                                                                "conditions": [
                                                                                    {
                                                                                        "condition": "time",
                                                                                        "after": "input_datetime.wind_down",
                                                                                        "before": "input_datetime.lights_auto_control_end"
                                                                                    }
                                                                                ],
                                                                                "sequence": [
                                                                                    {
                                                                                        "service": "light.turn_on",
                                                                                        "target": {
                                                                                            "entity_id": "light.powder_room_pendant_light_entity"
                                                                                        },
                                                                                        "data": {
                                                                                            "brightness_pct": 5
                                                                                        }
                                                                                    }
                                                                                ]
                                                                            }
                                                                        ],
                                                                        "default": [
                                                                            {
                                                                                "service": "light.turn_on",
                                                                                "target": {
                                                                                    "entity_id": "light.powder_room_pendant_light_entity"
                                                                                },
                                                                                "data": {
                                                                                    "brightness_pct": 100
                                                                                }
                                                                            }
                                                                        ]
                                                                    }
                                                                ]
                                                            }
                                                        ]
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    {
                                        "conditions": "{{ trigger_action | string in button_up_long }}",
                                        "sequence": [
                                            {
                                                "event": "ahb_controller_event",
                                                "event_data": {
                                                    "controller": "{{ controller_id }}",
                                                    "action": "button_up_long"
                                                }
                                            },
                                            {
                                                "choose": [
                                                    {
                                                        "conditions": "{{ button_up_long_loop }}",
                                                        "sequence": [
                                                            {
                                                                "repeat": {
                                                                    "while": "{{ repeat.index < button_up_long_max_loop_repeats | int }}",
                                                                    "sequence": [
                                                                        {
                                                                            "service": "light.turn_on",
                                                                            "target": {
                                                                                "entity_id": "light.powder_room_pendant_light_entity"
                                                                            },
                                                                            "data": {
                                                                                "brightness_step_pct": 10
                                                                            }
                                                                        }
                                                                    ]
                                                                }
                                                            }
                                                        ]
                                                    }
                                                ],
                                                "default": [
                                                    {
                                                        "service": "light.turn_on",
                                                        "target": {
                                                            "entity_id": "light.powder_room_pendant_light_entity"
                                                        },
                                                        "data": {
                                                            "brightness_step_pct": 10
                                                        }
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    {
                                        "conditions": [
                                            "{{ trigger_action | string in button_up_release }}",
                                            "{{ not integration_id in integrations_with_prev_event_storage or last_controller_event | string in button_up_long }}"
                                        ],
                                        "sequence": [
                                            {
                                                "event": "ahb_controller_event",
                                                "event_data": {
                                                    "controller": "{{ controller_id }}",
                                                    "action": "button_up_release"
                                                }
                                            },
                                            {
                                                "choose": [
                                                    {
                                                        "conditions": [],
                                                        "sequence": []
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    {
                                        "conditions": "{{ trigger_action | string in button_down_short }}",
                                        "sequence": [
                                            {
                                                "choose": [
                                                    {
                                                        "conditions": "{{ button_down_double_press }}",
                                                        "sequence": [
                                                            {
                                                                "choose": [
                                                                    {
                                                                        "conditions": "{{ trigger_action | string in states(helper_last_controller_event) and trigger_delta | int <= helper_double_press_delay | int }}",
                                                                        "sequence": [
                                                                            {
                                                                                "service": "input_text.set_value",
                                                                                "data": {
                                                                                    "entity_id": "input_text.zz_powder_room_lights_controller_last_event",
                                                                                    "value": "{{ {\"trigger_action\":\"double_press\",\"last_triggered\":now() | string} | to_json }}"
                                                                                }
                                                                            },
                                                                            {
                                                                                "event": "ahb_controller_event",
                                                                                "event_data": {
                                                                                    "controller": "{{ controller_id }}",
                                                                                    "action": "button_down_double"
                                                                                }
                                                                            },
                                                                            {
                                                                                "choose": [
                                                                                    {
                                                                                        "conditions": [],
                                                                                        "sequence": []
                                                                                    }
                                                                                ]
                                                                            }
                                                                        ]
                                                                    }
                                                                ],
                                                                "default": [
                                                                    {
                                                                        "delay": {
                                                                            "milliseconds": "{{ adjusted_double_press_delay }}"
                                                                        }
                                                                    },
                                                                    {
                                                                        "event": "ahb_controller_event",
                                                                        "event_data": {
                                                                            "controller": "{{ controller_id }}",
                                                                            "action": "button_down_short"
                                                                        }
                                                                    },
                                                                    {
                                                                        "choose": [
                                                                            {
                                                                                "conditions": [],
                                                                                "sequence": [
                                                                                    {
                                                                                        "service": "light.turn_off",
                                                                                        "target": {
                                                                                            "entity_id": "light.powder_room_pendant_light_entity"
                                                                                        },
                                                                                        "data": {}
                                                                                    }
                                                                                ]
                                                                            }
                                                                        ]
                                                                    }
                                                                ]
                                                            }
                                                        ]
                                                    }
                                                ],
                                                "default": [
                                                    {
                                                        "event": "ahb_controller_event",
                                                        "event_data": {
                                                            "controller": "{{ controller_id }}",
                                                            "action": "button_down_short"
                                                        }
                                                    },
                                                    {
                                                        "choose": [
                                                            {
                                                                "conditions": [],
                                                                "sequence": [
                                                                    {
                                                                        "service": "light.turn_off",
                                                                        "target": {
                                                                            "entity_id": "light.powder_room_pendant_light_entity"
                                                                        },
                                                                        "data": {}
                                                                    }
                                                                ]
                                                            }
                                                        ]
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    {
                                        "conditions": "{{ trigger_action | string in button_down_long }}",
                                        "sequence": [
                                            {
                                                "event": "ahb_controller_event",
                                                "event_data": {
                                                    "controller": "{{ controller_id }}",
                                                    "action": "button_down_long"
                                                }
                                            },
                                            {
                                                "choose": [
                                                    {
                                                        "conditions": "{{ button_down_long_loop }}",
                                                        "sequence": [
                                                            {
                                                                "repeat": {
                                                                    "while": "{{ repeat.index < button_down_long_max_loop_repeats | int }}",
                                                                    "sequence": [
                                                                        {
                                                                            "service": "light.turn_on",
                                                                            "target": {
                                                                                "entity_id": "light.powder_room_pendant_light_entity"
                                                                            },
                                                                            "data": {
                                                                                "brightness_step_pct": -10
                                                                            }
                                                                        }
                                                                    ]
                                                                }
                                                            }
                                                        ]
                                                    }
                                                ],
                                                "default": [
                                                    {
                                                        "service": "light.turn_on",
                                                        "target": {
                                                            "entity_id": "light.powder_room_pendant_light_entity"
                                                        },
                                                        "data": {
                                                            "brightness_step_pct": -10
                                                        }
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    {
                                        "conditions": [
                                            "{{ trigger_action | string in button_down_release }}",
                                            "{{ not integration_id in integrations_with_prev_event_storage or last_controller_event | string in button_down_long }}"
                                        ],
                                        "sequence": [
                                            {
                                                "event": "ahb_controller_event",
                                                "event_data": {
                                                    "controller": "{{ controller_id }}",
                                                    "action": "button_down_release"
                                                }
                                            },
                                            {
                                                "choose": [
                                                    {
                                                        "conditions": [],
                                                        "sequence": []
                                                    }
                                                ]
                                            }
                                        ]
                                    }
                                ]
                            }
                        ],
                        "id": "1643644178195",
                        "alias": "Powder Room Lights Controller",
                        "description": "Control the Powder Room Lights"
                    },
                    "blueprint_inputs": {
                        "id": "1643644178195",
                        "alias": "Powder Room Lights Controller",
                        "description": "Control the Powder Room Lights",
                        "use_blueprint": {
                            "path": "EPMatt/ikea_e1743.yaml",
                            "input": {
                                "integration": "ZHA",
                                "controller_device": "8fd4f8715be89cc0f383c887c3fac892",
                                "helper_last_controller_event": "input_text.zz_powder_room_lights_controller_last_event",
                                "action_button_up_short": [
                                    {
                                        "choose": [
                                            {
                                                "conditions": [
                                                    {
                                                        "condition": "time",
                                                        "after": "input_datetime.wind_down",
                                                        "before": "input_datetime.lights_auto_control_end"
                                                    }
                                                ],
                                                "sequence": [
                                                    {
                                                        "service": "light.turn_on",
                                                        "target": {
                                                            "entity_id": "light.powder_room_pendant_light_entity"
                                                        },
                                                        "data": {
                                                            "brightness_pct": 5
                                                        }
                                                    }
                                                ]
                                            }
                                        ],
                                        "default": [
                                            {
                                                "service": "light.turn_on",
                                                "target": {
                                                    "entity_id": "light.powder_room_pendant_light_entity"
                                                },
                                                "data": {
                                                    "brightness_pct": 100
                                                }
                                            }
                                        ]
                                    }
                                ],
                                "action_button_up_long": [
                                    {
                                        "service": "light.turn_on",
                                        "target": {
                                            "entity_id": "light.powder_room_pendant_light_entity"
                                        },
                                        "data": {
                                            "brightness_step_pct": 10
                                        }
                                    }
                                ],
                                "action_button_down_short": [
                                    {
                                        "service": "light.turn_off",
                                        "target": {
                                            "entity_id": "light.powder_room_pendant_light_entity"
                                        },
                                        "data": {}
                                    }
                                ],
                                "action_button_down_long": [
                                    {
                                        "service": "light.turn_on",
                                        "target": {
                                            "entity_id": "light.powder_room_pendant_light_entity"
                                        },
                                        "data": {
                                            "brightness_step_pct": -10
                                        }
                                    }
                                ],
                                "button_up_long_loop": true,
                                "button_up_long_max_loop_repeats": 50,
                                "button_down_long_loop": true,
                                "button_down_long_max_loop_repeats": 50
                            }
                        }
                    },
                    "context": {
                        "id": "c952080fbdf9df3145d33df7bf3c2847",
                        "parent_id": "b598e770d7af7524da981fd483e0e9a9",
                        "user_id": null
                    }
                },
                "short_dict": {
                    "last_step": "action/3/choose/5/conditions/0",
                    "run_id": "611c6ad0ef18282b2bca49938afe66a3",
                    "state": "stopped",
                    "script_execution": "finished",
                    "timestamp": {
                        "start": "2022-04-02T04:34:52.511088+00:00",
                        "finish": "2022-04-02T04:34:52.523175+00:00"
                    },
                    "domain": "automation",
                    "item_id": "1643644178195",
                    "trigger": "event 'zha_event'"
                }
            }
        ]
    }
}